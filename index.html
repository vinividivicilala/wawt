







<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Life Is What It Is Learn</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@600&display=swap');

   body {
  margin: 0;
  background-color: #000;
  font-family: 'Plus Jakarta Sans', sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 100vh; /* ganti dari height */
  padding-top: 40px;
}


    .header {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      background-color: #000;
      color: white;
      margin-bottom: 40px;
      margin-right: 850px;
    }

    .logo {
      width: 70px;
      height: 70px;
      margin-right: 12px;
      border-radius: 8px;
      object-fit: cover;
    }

    .title {
      font-size: 29px;
      font-weight: 600;
      white-space: nowrap;
    }

    .line-box {
      width: 1630px;
      height: auto;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 30px;
      background: transparent;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 50px;
      padding: 40px;
	  margin-left: 150px;
    }

    /* Halaman 1 */
    .card {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      padding: 15px;
      cursor: pointer;
    }

    .card img {
      width: 400px;
      height: auto;
	   border-radius: 30px;
    }

    .card-title {
      margin-top: 20px;
      color: white;
      font-size: 30px;
      font-weight: 600;
      padding: 10px 30px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 30px;
      display: inline-block;
      margin-right: 300px;
    }

    .bottom-line {
      width: 100vw;
      border-top: 2px solid rgba(255, 255, 255, 0.2);
      margin-top: 90px;
      position: relative;
      left: 50%;
      right: 50%;
      margin-left: -50vw;
      margin-right: -50vw;
    }

    .bottom-text {
      color: white;
      margin-top: 30px;
      font-size: 18px;
      text-align: left;
      line-height: 1.6;
      margin-right: 1000px;
      margin-bottom: 40px;
	  	  margin-left: 150px;

    }

    .bottom-text a {
      color: #fff;
      text-decoration: none;
    }

    .bottom-text a:hover {
      text-decoration: underline;
    }

    #page2 {
      display: none;
    }

    .page2-content {
      display: flex;
      gap: 50px;
      align-items: flex-start;
    }

    .page2-left {
      display: flex;
      flex-direction: column;
      gap: 30px;
    }

    .page2-left img {
      width: 400px;
      height: auto;
	   border-radius: 30px;
    }

    .bab-cards {
      display: flex;
      flex-direction: column; /* ke bawah */
      gap: 20px;
    }

    /* Kalau mau bab-babnya memanjang ke samping dalam satu baris, ubah ke flex-direction: row; */

    .bab-card {
      display: flex;
      flex-direction: row;
      gap: 20px;
      align-items: flex-start;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      color: white;
    }

    .bab-title-box {
      font-size: 20px;
      font-weight: 600;
      padding: 8px 20px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      flex-shrink: 0;
    }

    .bab-desc-box {
      font-size: 16px;
      line-height: 1.5;
    }

    .page2-right {
      color: white;
      max-width: 500px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .title-box {
      font-size: 36px;
      padding: 10px 30px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      display: inline-block;
	   color: #fff;
    }

    .desc-box {
      font-size: 18px;
      line-height: 1.6;
      padding: 20px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
    }
	
	.nav-link {
  position: fixed;  /* atau absolute sesuai kebutuhan */
  bottom: 20px;     /* jarak dari bawah halaman */
  left: 20px;       /* jarak dari kiri halaman */
}

.nav-link a {
  display: inline-flex;   /* agar icon dan teks sejajar */
  align-items: center;    /* vertikal rata tengah */
  color: white;           /* warna teks */
  text-decoration: none;  /* hilangkan underline */
  font-size: 16px;        /* ukuran teks */
  font-weight: 500;       /* ketebalan teks */
}

.nav-link a:hover {
  opacity: 0.8;  /* efek hover */
}

.nav-link svg {
  margin-right: 8px;   /* jarak antara icon dan teks */
}

#page2, #page3 {
      display: none;
    }
	
	
	#page4, #page5 {
      display: none;
    }



.bab-card svg {
  width: 48px;
  height: 48px;
  flex-shrink: 0;
}



@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}


/* Animasi untuk feedback item */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .feedback-item {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 10px;
    padding: 15px;
    animation: fadeInUp 0.5s ease-out;
    transition: all 0.3s;
  }
  
  .feedback-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }
  
  .feedback-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }
  
  .feedback-user {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .feedback-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: #4ea1ff;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
  }
  
  .feedback-time {
    color: #ccc;
    font-size: 14px;
  }
  
  .feedback-title {
    color: white;
    font-weight: bold;
    margin-bottom: 8px;
    font-size: 18px;
  }
  
  .feedback-category {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 10px;
    font-size: 12px;
    margin-bottom: 10px;
  }
  
  .category-design {
    background: rgba(78, 161, 255, 0.2);
    color: #4ea1ff;
  }
  
  .category-feature {
    background: rgba(76, 175, 80, 0.2);
    color: #4CAF50;
  }
  
  .category-content {
    background: rgba(255, 193, 7, 0.2);
    color: #FFC107;
  }
  
  .category-bug {
    background: rgba(244, 67, 54, 0.2);
    color: #F44336;
  }
  
  .category-other {
    background: rgba(156, 39, 176, 0.2);
    color: #9C27B0;
  }
  
  .feedback-content {
    color: #ddd;
    line-height: 1.6;
  }
  
  /* Animasi tombol submit */
  #submitFeedback {
    position: relative;
    overflow: hidden;
  }
  
  #submitFeedback:after {
    content: "";
    position: absolute;
    top: -50%;
    left: -60%;
    width: 200%;
    height: 200%;
    background: rgba(255,255,255,0.1);
    transform: rotate(30deg);
    transition: all 0.3s;
  }
  
  #submitFeedback:hover:after {
    left: 100%;
  }
  
  /* Animasi loading */
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  .loading-spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s ease-in-out infinite;
    margin-left: 8px;
  }
  
  
  .feedback-time {
  color: #ccc;
  font-size: 14px;
  white-space: nowrap;
  text-align: right;
  min-width: 150px;
}

.feedback-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 10px;
  gap: 15px;
}

.feedback-user {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-grow: 1;
}

.feedback-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background-color: #4ea1ff;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  flex-shrink: 0;
}



/* Tambahkan di bagian style */
.discussion-item {
  margin-bottom: 20px;
  padding: 20px;
  transition: all 0.3s;
  cursor: pointer;
  position: relative;
}

.discussion-item:not(:last-child)::after {
  content: "";
  position: absolute;
  bottom: -10px;
  left: 20px;
  right: 20px;
  height: 1px;
  background: rgba(255,255,255,0.1);
}

.hot-discussion {
  border-left: 3px solid #F44336;
  padding-left: 17px;
}

.latest-discussion {
  border-left: 3px solid #4ea1ff;
  padding-left: 17px;
}


.forum-header {
  display: flex;
  justify-content: space-between;
  width: 100%;
  max-width: 1200px; /* atau sesuai lebar kontainer kamu */
  margin: 0 auto;
  padding: 10px 20px;
  color: rgba(255, 255, 255, 0.7);
  font-weight: 500;
  font-size: 16px;
}

.forum-column {
  flex: 1;
  text-align: left;
}

/* Atur agar kolom kanan rata kanan */
.forum-column:nth-child(2),
.forum-column:nth-child(3),
.forum-column:nth-child(4) {
  text-align: right;
}

.forum-header-line {
  width: 100%;
  max-width: 1200px; /* atau sesuai lebar kontainer */
  margin: 0 auto;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  margin-bottom: 20px; /* jarak ke bawah */
}



#newDiscussionModal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    z-index: 10000;
    justify-content: center;
    align-items: center;
}

/* Style untuk konten modal */
#newDiscussionModal > div {
    background: #1a1a1a;
    border-radius: 15px;
    padding: 30px;
    width: 600px;
    max-width: 90%;
    max-height: 90vh;
    overflow-y: auto;
}




  .admin-badge {
    display: inline-block;
    background: linear-gradient(135deg, #ff6b6b, #ff3838);
    color: white;
    font-size: 12px;
    font-weight: bold;
    padding: 3px 8px;
    border-radius: 10px;
    margin-left: 8px;
    vertical-align: middle;
  }
  
  .pinned-announcement {
    position: relative;
    background: rgba(255, 184, 78, 0.1);
    border: 1px solid rgba(255, 184, 78, 0.3);
    border-radius: 12px;
    padding: 20px;
  }
  
  .pinned-announcement::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 5px;
    height: 100%;
    background: linear-gradient(to bottom, #ffb84e, #ff8800);
    border-radius: 12px 0 0 12px;
  }
  
  .announcement-link {
    color: #4ea1ff;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    margin-top: 10px;
  }
  
  .announcement-link:hover {
    text-decoration: underline;
  }



.announcement-item {
  position: relative;
}

.announcement-item::before {
  content: "PENGUMUMAN RESMI";
  position: absolute;
  top: 10px;
  right: 10px;
  background: #ff6b6b;
  color: white;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: bold;
}




.announcement-item {
    position: relative;
    border-left: 4px solid #ff6b6b !important;
    background: rgba(255, 107, 107, 0.05) !important;
}

.announcement-item .feedback-title {
    color: #ff6b6b !important;
    font-size: 18px !important;
}

.announcement-item .feedback-avatar {
    background: #ff6b6b !important;
}

.pinned-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #ff6b6b;
    color: white;
    padding: 3px 8px;
    border-radius: 10px;
    font-size: 12px;
    display: flex;
    align-items: center;
    gap: 5px;
}


.feedback-item {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 30px; /* dari semula 10px/8px */
  padding: 20px;
  margin-bottom: 20px;
  width: 100%;
  max-width: 100%; /* agar penuh */
  box-sizing: border-box;
}



.feedback-category {
  padding: 5px 10px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: bold;
  display: inline-block;
  margin-top: 10px;
}

.category-design { background: #4ea1ff21; color: #4ea1ff; }
.category-feature { background: #34d39921; color: #34d399; }
.category-bug { background: #f8717121; color: #f87171; }
.category-content { background: #facc1521; color: #facc15; }
.category-announcement { background: #ff6b6b21; color: #ff6b6b; }
.category-other { background: #9ca3af21; color: #9ca3af; }







.pin-icon {
    width: 16px;
    height: 16px;
    margin-right: 6px;
    fill: #ff6b6b;
    vertical-align: middle;
  }
  .pinned-item {
    position: relative;
    border-left: 4px solid #ff6b6b;
    background: rgba(255, 107, 107, 0.08);
  }
  .pinned-item::before {
    content: '';
    position: absolute;
    top: 10px;
    right: 10px;
    width: 24px;
    height: 24px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ff6b6b'%3E%3Cpath d='M16 12V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v8l-2 2v1h15v-1l-2-2z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-size: contain;
    opacity: 0.7;
  }


/* Tambahkan di CSS Anda */
.feedback-item {
  transition: all 0.2s ease;
  cursor: pointer;
}

.feedback-item:hover {
  background: rgba(255, 255, 255, 0.08) !important;
}

.announcement-item {
  border-left: 4px solid #ff6b6b;
  background: rgba(255, 107, 107, 0.05);
}

.feedback-avatar {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: rgba(78, 161, 255, 0.2);
  color: white;
  font-weight: bold;
  margin-right: 15px;
}



/* Style untuk item pengumuman yang bisa diklik */
.pinned-item {
    cursor: pointer;
    transition: all 0.2s ease;
}

.pinned-item:hover {
    background: rgba(255, 255, 255, 0.08);
}

/* Style untuk tombol di dalam item yang tidak trigger klik */
.pinned-item button {
    cursor: default;
    pointer-events: auto;
}




/* Loading indicator */
.loading-indicator {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 30px;
    color: #ccc;
}

.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: #4ea1ff;
    animation: spin 1s ease-in-out infinite;
    margin-left: 10px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}




#backToFeedbackPage:hover {
  background: rgba(78, 161, 255, 0.1);
  transition: background 0.3s ease;
}







	
	
  </style>
</head>
<body>
  <div class="header">
    <img src="images/5.jpg" alt="Logo" class="logo" />
	<div class="title">Life Is What It Is Learn</div>
  </div>
  
  <div id="authArea" style="position: absolute; top: 10px; right: 20px; z-index: 999; display: flex; align-items: center; gap: 15px;">
  <button id="loginBtn" style="display: flex; align-items: center; background: none; border: 2px solid #9fc1d5; color: #9fc1d5; font-weight: bold; font-size: 29px; border-radius: 30px; padding: 10px 20px; cursor: pointer;">
    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 48 48" width="24">
      <path fill="#4285F4" d="M24 9.5c3.54 0 6.36 1.38 8.32 3.19l6.14-6.14C34.9 2.52 29.88 0 24 0 14.96 0 7.18 5.72 3.74 13.85l7.36 5.73C13 12.33 18.12 9.5 24 9.5z"/>
      <path fill="#34A853" d="M46.36 24.6c0-1.74-.16-3.41-.45-5.03H24v9.52h12.57c-.55 3-2.2 5.51-4.71 7.19v5.98h7.62c4.46-4.12 6.98-10.18 6.98-17.66z"/>
      <path fill="#FBBC05" d="M10.59 28.45c-1.07-3.2-1.07-6.64 0-9.84v-6.02H3.23a23.91 23.91 0 000 21.88l7.36-5.73z"/>
      <path fill="#EA4335" d="M24 48c6.48 0 11.92-2.13 15.9-5.78l-7.62-5.98C29.93 38.67 27.13 39.5 24 39.5c-5.88 0-10.98-3.84-12.9-9.14l-7.36 5.73C7.18 42.28 14.96 48 24 48z"/>
    </svg>
    <span style="margin-left: 10px;">Masuk dengan Google</span>
  </button>

  <button id="logoutBtn" style="display: none; background: none; border: 2px solid white; color: white; padding: 10px 15px; border-radius: 20px; font-size: 29px; cursor: pointer;">
    Keluar
  </button>

  <span id="greeting" style="color: white; font-size: 29px; margin-left: 15px;"></span>
</div>



<!-- Halaman 1 - Utama -->
  <div id="page1">
    <!-- Konten halaman utama -->
    <div id="dynamicText" style="margin-top: 50px; font-size: 40px; font-weight: bold; color: #ffffff; text-align: center;"></div>
    <h1 style="color: white; font-size: 28px; margin-bottom: 20px; margin-left: 180px;">Halaman Utama</h1>
    <div class="line-box">
      <!-- Kartu-kartu konten -->
      <div class="card" id="card-arduino">
        <img src="images/5.jpg" alt="Foto Arduino" />
        <div class="card-title">
          Arduino 
          <svg xmlns="http://www.w3.org/2000/svg" width="29" height="29" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </div>
      </div>

      <div class="card" id="card-iot">
        <img src="images/5.jpg" alt="Foto IOT" />
        <div class="card-title">
          IOT 
          <svg xmlns="http://www.w3.org/2000/svg" width="29" height="29" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </div>
      </div>

      <div class="card" id="card-blog">
        <img src="images/5.jpg" alt="Foto Blog" />
        <div class="card-title">
          Blog
          <svg xmlns="http://www.w3.org/2000/svg" width="29" height="29" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </div>
      </div>
    </div>
	
	
    <div class="bottom-line"></div>
    <div class="bottom-text">
      <!-- Link-link footer -->
      <div>
        <a href="#" class="tentangLink">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Tentang Kami
        </a>
      </div>
      <div>
        <a href="#" class="masukanLink">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Masukan
        </a>
      </div>
      <div>
        <a href="#" class="forumLink">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Forum Diskusi
        </a>
      </div>
    </div>
	
  </div>















<!-- Halaman 2 - Arduino -->
  <div id="page2">
   <div id="dynamicText" style="margin-top: 50px; font-size: 40px; font-weight: bold; color: #ffffff; text-align: center;"></div>

    <h1 style="color: white; font-size: 28px; margin-bottom: 20px; margin-left: 180px;">Halaman Arduino</h1>
    <div class="line-box page2-content">
      <div class="page2-left">
        <img src="images/5.jpg" alt="Foto Arduino Detail" />
        <div class="bab-cards">
          <div class="bab-card">
            <div class="bab-title-box">Sejarah Arduino</div>
            <div class="bab-desc-box">Arduino pertama kali dikembangkan pada tahun 2005 di Italia untuk mempermudah pengajaran elektronika dan pemrograman.</div>
            <svg xmlns="http://www.w3.org/2000/svg" width="29" height="29" viewBox="0 0 29 29" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </div>
          <div class="bab-card">
            <div class="bab-title-box">Project Arduino</div>
            <div class="bab-desc-box">Dengan Arduino, banyak project dibuat seperti robotika, IoT, otomasi rumah, hingga alat bantu belajar interaktif.</div>
             <svg xmlns="http://www.w3.org/2000/svg" width="29" height="29" viewBox="0 0 29 29" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </div>
          <div class="bab-card">
            <div class="bab-title-box">Jenis Arduino</div>
            <div class="bab-desc-box">Terdapat banyak jenis board Arduino seperti Uno, Mega, Nano, yang memiliki spesifikasi berbeda sesuai kebutuhan.</div>
             <svg xmlns="http://www.w3.org/2000/svg" width="29" height="29" viewBox="0 0 29 29" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </div>
          <div class="bab-card">
            <div class="bab-title-box">Bahasa Pemrograman</div>
            <div class="bab-desc-box">Arduino menggunakan bahasa pemrograman C/C++ dengan IDE Arduino yang mudah dipelajari pemula.</div>
             <svg xmlns="http://www.w3.org/2000/svg" width="29" height="29" viewBox="0 0 29 29" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </div>
          <div class="bab-card">
            <div class="bab-title-box">Sensor & Modul</div>
            <div class="bab-desc-box">Arduino mendukung berbagai sensor & modul seperti sensor suhu, cahaya, motor driver, WiFi, dan lainnya.</div>
             <svg xmlns="http://www.w3.org/2000/svg" width="29" height="29" viewBox="0 0 29 29" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </div>
        </div>
      </div>
      <div class="page2-right">
        <h1 class="title-box">Arduino</h1>
        <p class="desc-box">
          Arduino adalah papan mikrokontroler open-source yang digunakan untuk membuat proyek elektronik interaktif.
          Dengan Arduino, Anda dapat mempelajari dasar-dasar pemrograman, sensor, dan aktuator dengan mudah.
          Cocok untuk pemula maupun profesional yang ingin membuat prototipe cepat.
        </p>
      </div>
	   <a href="https://faridardiansyah.netlify.app/#" target="_blank" style="
  position: fixed;
  bottom: 20px;
  right: 30px;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  padding: 10px 20px;
  color: white;
  font-size: 16px;
  font-weight: 500;
  text-decoration: none;
  z-index: 999;
">
  Powered by: Manusia
</a>


    </div>
    
    <div class="bottom-line"></div>

    <div class="bottom-text">
      <div>
        <a href="#" class="tentangLink">

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Tentang Kami
        </a>
      </div>
      <div>
       <a href="#" class="masukanLink">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Masukan
        </a>
      </div>
      <div>
        <a href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Saran
        </a>
      </div>
    </div>

    <div class="nav-link">
      <a href="#" id="back">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 5 5 12 12 19"></polyline>
        </svg>
        Kembali
      </a>
    </div>
  </div>

  <!-- Halaman 3 - IoT -->
  <div id="page3">
   <div id="dynamicText" style="margin-top: 50px; font-size: 40px; font-weight: bold; color: #ffffff; text-align: center;"></div>

    <h1 style="color: white; font-size: 28px; margin-bottom: 20px; margin-left: 180px;">Halaman IoT</h1>
    <div class="line-box page2-content">
      <div class="page2-left">
        <img src="images/5.jpg" alt="Foto IOT" />
        <div class="bab-cards">
          <div class="bab-card">
            <div class="bab-title-box">Pengertian IoT</div>
            <div class="bab-desc-box">Internet of Things (IoT) adalah konsep menghubungkan perangkat fisik ke internet agar dapat saling berkomunikasi dan bertukar data.</div>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </div>
          <div class="bab-card">
            <div class="bab-title-box">Contoh Penerapan</div>
            <div class="bab-desc-box">Contoh umum IoT meliputi smart home, smart city, kendaraan pintar, dan perangkat wearable.</div>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </div>
          <div class="bab-card">
            <div class="bab-title-box">Komponen IoT</div>
            <div class="bab-desc-box">IoT terdiri dari sensor, perangkat, konektivitas jaringan, dan sistem cloud untuk pemrosesan data.</div>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </div>
          <div class="bab-card">
            <div class="bab-title-box">Keamanan IoT</div>
            <div class="bab-desc-box">Aspek penting dari IoT adalah menjaga keamanan dan privasi data yang dikirim antar perangkat.</div>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </div>
          <div class="bab-card">
            <div class="bab-title-box">Platform Populer</div>
            <div class="bab-desc-box">Beberapa platform IoT yang populer adalah Blynk, Thingspeak, dan Google Cloud IoT Core.</div>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </div>
        </div>
      </div>
      <div class="page2-right">
        <h1 class="title-box">Internet of Things</h1>
        <p class="desc-box">
          IoT memungkinkan perangkat fisik terhubung ke jaringan internet untuk bertukar informasi dan memberikan kontrol secara jarak jauh.
          Teknologi ini semakin berkembang dan digunakan di berbagai bidang seperti industri, pertanian, kesehatan, dan rumah tangga.
        </p>
      </div>
	    <a href="https://faridardiansyah.netlify.app/#" target="_blank" style="
  position: fixed;
  bottom: 20px;
  right: 30px;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  padding: 10px 20px;
  color: white;
  font-size: 16px;
  font-weight: 500;
  text-decoration: none;
  z-index: 999;
">
  Powered by: Manusia
</a>


    </div>

    <div class="bottom-line"></div>

    <div class="bottom-text">
      <div>
        <a href="#" class="tentangLink">

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Tentang Kami
        </a>
      </div>
      <div>
        <a href="#" class="masukanLink">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Masukan
        </a>
      </div>
      <div>
        <a href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Saran
        </a>
      </div>
    </div>

    <div class="nav-link">
      <a href="#" id="back-iot">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 5 5 12 12 19"></polyline>
        </svg>
        Kembali
      </a>
    </div>
  </div>



<!-- Pop-up Halaman Penuh -->
<div id="popup-dev" style="
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.95);
  color: white;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  text-align: center;
  padding: 20px;
">

  <!-- SVG animasi gear -->
  <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#00ffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
    style="animation: spin 2s linear infinite; margin-bottom: 30px;">
    <circle cx="12" cy="12" r="3"></circle>
    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06A1.65 1.65 0 0 0 15 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 8.6 15a1.65 1.65 0 0 0-1.82-.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.6a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 15.4 9a1.65 1.65 0 0 0 1.82.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 15z"></path>
  </svg>

  <h2 style="font-size: 28px; margin-bottom: 15px;">Website ini sedang dalam perkembangan</h2>
  <p style="font-size: 18px; color: #ccc;">Fitur dan tampilan mungkin akan berubah seiring waktu.</p>
  
  <button onclick="document.getElementById('popup-dev').style.display='none'" style="
    margin-top: 30px;
    padding: 10px 20px;
    background: none;
    border: 2px solid #00ffff;
    color: #00ffff;
    font-size: 18px;
    border-radius: 10px;
    cursor: pointer;
  ">Saya Mengerti</button>
</div>






<!-- Halaman 4 - Blog -->
<div id="page4">
  <div id="dynamicText" style="margin-top: 50px; font-size: 40px; font-weight: bold; color: #ffffff; text-align: center;"></div>
  
  <h1 style="color: white; font-size: 28px; margin-bottom: 20px; margin-left: 180px;">Halaman Blog</h1>
  <div class="line-box" style="flex-direction: column; align-items: flex-start; gap: 30px;">
    <h1 class="title-box">Blog Terbaru</h1>
    
    <div style="width: 100%; display: flex; justify-content: space-between; align-items: center;">
      <p style="color: #ccc; margin: 0;">Artikel terbaru dari berbagai topik</p>
      <a href="#" id="lihatSemuaBlog" style="color: #4ea1ff; font-weight: bold; text-decoration: none; display: flex; align-items: center;">
        Lihat semua blog 
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 5px;">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </a>
    </div>
    
    <div class="bab-card" style="width: 100%; display: flex; gap: 20px; align-items: center;">
      <img src="images/5.jpg" alt="Blog 1" style="width: 200px; height: 120px; object-fit: cover; border-radius: 15px;" />
      <div style="flex: 1;">
        <div style="color: #ccc; font-size: 14px;">14 Juli 2025 • 60 min read</div>
        <h3 style="color: white; font-weight: bold; font-size: 20px; margin: 8px 0;">
         Siapa Farid Ardiansyah?
        </h3>
        <p style="color: #ccc; margin: 8px 0; line-height: 1.5;">
          Kalau Kamu tidak tau siapa farid ardiansyah, saya menjelaskan secara detail...
        </p>
        <a href="#" style="color: #4ea1ff; font-weight: bold; text-decoration: none; display: inline-flex; align-items: center;">
          Baca selengkapnya
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 5px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </div>
    </div>
    
    <div class="bab-card" style="width: 100%; display: flex; gap: 20px; align-items: center;">
      <img src="images/5.jpg" alt="Blog 2" style="width: 200px; height: 120px; object-fit: cover; border-radius: 15px;" />
      <div style="flex: 1;">
        <div style="color: #ccc; font-size: 14px;">14 Juli 2025 • 60 min read</div>
        <h3 style="color: white; font-weight: bold; font-size: 20px; margin: 8px 0;">
          Apakah Kuliah di Universitas Gunadarma worth it sebanding harga UKT?
        </h3>
        <p style="color: #ccc; margin: 8px 0; line-height: 1.5;">
          Saya adalah alumnie univrsitas gunadarma, saya menjelaskan secara detail sesuai pengalaman kuliah 4 tahun...
        </p>
        <a href="#" style="color: #4ea1ff; font-weight: bold; text-decoration: none; display: inline-flex; align-items: center;">
          Baca selengkapnya
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 5px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </div>
    </div>
    
    <div class="bab-card" style="width: 100%; display: flex; gap: 20px; align-items: center;">
      <img src="images/5.jpg" alt="Blog 3" style="width: 200px; height: 120px; object-fit: cover; border-radius: 15px;" />
      <div style="flex: 1;">
        <div style="color: #ccc; font-size: 14px;">14 Juli 2025 • 60 min read</div>
        <h3 style="color: white; font-weight: bold; font-size: 20px; margin: 8px 0;">
          Apakah saya membutuhkan pasangan dalam hidup?
        </h3>
        <p style="color: #ccc; margin: 8px 0; line-height: 1.5;">
          saya menjelaskan secara detail sesuai dengan pengalaman hidup...
        </p>
        <a href="#" style="color: #4ea1ff; font-weight: bold; text-decoration: none; display: inline-flex; align-items: center;">
          Baca selengkapnya
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 5px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </div>
    </div>
  </div>
  
  
  <div class="bottom-line"></div>

    <div class="bottom-text">
      <div>
        <a href="#" class="tentangLink">

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Tentang Kami
        </a>
      </div>
      <div>
        <a href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Masukan
        </a>
      </div>
      <div>
        <a href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Saran
        </a>
      </div>
    </div>

  <div class="nav-link">
    <a href="#" id="back-blog">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 5 5 12 12 19"></polyline>
      </svg>
      Kembali
    </a>
  </div>
  
  <a href="https://faridardiansyah.netlify.app/#" target="_blank" style="
    position: fixed;
    bottom: 20px;
    right: 30px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 10px 20px;
    color: white;
    font-size: 16px;
    font-weight: 500;
    text-decoration: none;
    z-index: 999;
  ">
    Powered by: Manusia
  </a>
</div>







<!-- Halaman 5 - Kumpulan Blog -->
<div id="page5">
  <div id="dynamicText" style="margin-top: 50px; font-size: 40px; font-weight: bold; color: #ffffff; text-align: center;"></div>
  
  <h1 style="color: white; font-size: 28px; margin: 30px 0 10px 180px;">Kumpulan Blog</h1>
  <div class="line-box" style="flex-direction: column; align-items: flex-start; gap: 20px;">
    <!-- Header dengan info jumlah blog -->
    <div style="width: 100%; display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <div id="blogCountDisplay" style="color: #ccc; font-size: 16px;">
        Menampilkan 6 dari 25 Blog
      </div>
      <div style="display: flex; gap: 10px; align-items: center;">
        <div style="position: relative;">
          <input type="text" id="blogSearch" placeholder="Cari blog..." style="
            padding: 10px 15px;
            padding-right: 40px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            color: white;
            font-size: 14px;
            width: 250px;
          ">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ccc" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
          ">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </div>
        <button id="searchBtn" style="
          padding: 10px 15px;
          background: rgba(78, 161, 255, 0.2);
          border: 1px solid rgba(78, 161, 255, 0.5);
          border-radius: 20px;
          color: #4ea1ff;
          font-size: 14px;
          cursor: pointer;
          transition: all 0.3s;
        ">
          Cari
        </button>
      </div>
    </div>
    
    <!-- Daftar blog -->
    <div id="blogList" style="width: 100%; display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;">
      <!-- Blog 1 -->
      <div class="bab-card blog-item" style="display: flex; flex-direction: column; height: 100%; transition: transform 0.3s;" data-title="BMKG: Cuaca Ekstrem Masih Mengintai, Musim Kemarau Belum Dominan" data-date="2025-07-12" data-category="Berita" data-tags="cuaca, bmkg, iklim">
        <img src="images/5.jpg" alt="Blog 1" style="width: 100%; height: 200px; object-fit: cover; border-radius: 15px; margin-bottom: 15px;" />
        <div style="flex: 1; display: flex; flex-direction: column;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <span style="color: red; font-size: 12px; font-weight: bold; background: rgba(78, 161, 255, 0.1); padding: 4px 8px; border-radius: 10px;">Farid Ardiansyah</span>
            <span style="color: #ccc; font-size: 12px;">14 Juli 2025</span>
          </div>
          <h3 style="color: white; font-weight: bold; font-size: 18px; margin: 0 0 10px 0; line-height: 1.4;">
            Siapa Farid Ardiansyah?
          </h3>
          <p style="color: #ccc; margin: 0 0 15px 0; line-height: 1.5; font-size: 14px; flex-grow: 1;">
            Kalau Kamu tidak tau siapa farid ardiansyah, saya menjelaskan secara detail.....
          </p>
          <a href="#" style="color: #4ea1ff; font-weight: bold; text-decoration: none; display: inline-flex; align-items: center; font-size: 14px; margin-top: auto;">
            Baca selengkapnya
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 5px;">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </div>
      </div>
      
      <!-- Blog 2 -->
      <div class="bab-card blog-item" style="display: flex; flex-direction: column; height: 100%; transition: transform 0.3s;" data-title="Tutorial Arduino: Membuat Sistem Monitoring Suhu dan Kelembaban" data-date="2025-07-10" data-category="Tutorial" data-tags="arduino, sensor, pemrograman">
        <img src="images/5.jpg" alt="Blog 2" style="width: 100%; height: 200px; object-fit: cover; border-radius: 15px; margin-bottom: 15px;" />
        <div style="flex: 1; display: flex; flex-direction: column;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <span style="color: blue; font-size: 12px; font-weight: bold; background: rgba(78, 161, 255, 0.1); padding: 4px 8px; border-radius: 10px;">Universitas Gunadarma </span>
            <span style="color: #ccc; font-size: 12px;">14 Juli 2025</span>
          </div>
          <h3 style="color: white; font-weight: bold; font-size: 18px; margin: 0 0 10px 0; line-height: 1.4;">
            Apakah Kuliah di Universitas Gunadarma worth it sebanding harga UKT?

          </h3>
          <p style="color: #ccc; margin: 0 0 15px 0; line-height: 1.5; font-size: 14px; flex-grow: 1;">
            Saya adalah alumnie univrsitas gunadarma, saya menjelaskan secara detail sesuai pengalaman kuliah 4 tahun......
          </p>
          <a href="#" style="color: #4ea1ff; font-weight: bold; text-decoration: none; display: inline-flex; align-items: center; font-size: 14px; margin-top: auto;">
            Baca selengkapnya
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 5px;">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </div>
      </div>
      
      <!-- Blog 3 -->
      <div class="bab-card blog-item" style="display: flex; flex-direction: column; height: 100%; transition: transform 0.3s;" data-title="IoT dalam Pertanian: Meningkatkan Produktivitas dengan Teknologi" data-date="2025-07-08" data-category="Teknologi" data-tags="iot, pertanian, smart-farming">
        <img src="images/5.jpg" alt="Blog 3" style="width: 100%; height: 200px; object-fit: cover; border-radius: 15px; margin-bottom: 15px;" />
        <div style="flex: 1; display: flex; flex-direction: column;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <span style="color: green; font-size: 12px; font-weight: bold; background: rgba(78, 161, 255, 0.1); padding: 4px 8px; border-radius: 10px;">pasangan</span>
            <span style="color: #ccc; font-size: 12px;">14 Juli 2025</span>
          </div>
          <h3 style="color: white; font-weight: bold; font-size: 18px; margin: 0 0 10px 0; line-height: 1.4;">
		  Apakah saya membutuhkan pasangan dalam hidup?

          </h3>
          <p style="color: #ccc; margin: 0 0 15px 0; line-height: 1.5; font-size: 14px; flex-grow: 1;">
            saya menjelaskan secara detail sesuai dengan pengalaman hidup......
          </p>
          <a href="#" style="color: #4ea1ff; font-weight: bold; text-decoration: none; display: inline-flex; align-items: center; font-size: 14px; margin-top: auto;">
            Baca selengkapnya
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 5px;">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </div>
      </div>
      
      <!-- Blog 4 -->
      <div class="bab-card blog-item" style="display: flex; flex-direction: column; height: 100%; transition: transform 0.3s;" data-title="Review Modul ESP32: Kelebihan dan Kekurangan untuk Project IoT" data-date="2025-07-05" data-category="Review" data-tags="esp32, iot, review">
        <img src="images/5.jpg" alt="Blog 4" style="width: 100%; height: 200px; object-fit: cover; border-radius: 15px; margin-bottom: 15px;" />
        <div style="flex: 1; display: flex; flex-direction: column;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <span style="color: red; font-size: 12px; font-weight: bold; background: rgba(78, 161, 255, 0.1); padding: 4px 8px; border-radius: 10px;"> Belum dibikin blog nya, sabar ya</span>
            <span style="color: #ccc; font-size: 12px;">14 Juli 2025</span>
          </div>
          <h3 style="color: white; font-weight: bold; font-size: 18px; margin: 0 0 10px 0; line-height: 1.4;">
            Belum dibikin blog nya, sabar ya
          </h3>
          <p style="color: #ccc; margin: 0 0 15px 0; line-height: 1.5; font-size: 14px; flex-grow: 1;">
            saya bakal bikin blog nya sesuai waktu ya
          </p>
          <a href="#" style="color: #4ea1ff; font-weight: bold; text-decoration: none; display: inline-flex; align-items: center; font-size: 14px; margin-top: auto;">
            Baca selengkapnya
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 5px;">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </div>
      </div>
      
      <!-- Blog 5 -->
      <div class="bab-card blog-item" style="display: flex; flex-direction: column; height: 100%; transition: transform 0.3s;" data-title="Panduan Lengkap Pemrograman Arduino untuk Pemula" data-date="2025-07-03" data-category="Tutorial" data-tags="arduino, pemrograman, dasar">
        <img src="images/5.jpg" alt="Blog 5" style="width: 100%; height: 200px; object-fit: cover; border-radius: 15px; margin-bottom: 15px;" />
        <div style="flex: 1; display: flex; flex-direction: column;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <span style="color: yellow; font-size: 12px; font-weight: bold; background: rgba(78, 161, 255, 0.1); padding: 4px 8px; border-radius: 10px;">  Belum dibikin blog nya, sabar ya</span>
            <span style="color: #ccc; font-size: 12px;">14 Juli 2025</span>
          </div>
          <h3 style="color: white; font-weight: bold; font-size: 18px; margin: 0 0 10px 0; line-height: 1.4;">
             Belum dibikin blog nya, sabar ya
          </h3>
          <p style="color: #ccc; margin: 0 0 15px 0; line-height: 1.5; font-size: 14px; flex-grow: 1;">
                        saya bakal bikin blog nya sesuai waktu ya...
          </p>
          <a href="#" style="color: #4ea1ff; font-weight: bold; text-decoration: none; display: inline-flex; align-items: center; font-size: 14px; margin-top: auto;">
            Baca selengkapnya
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 5px;">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </div>
      </div>
      
      <!-- Blog 6 -->
      <div class="bab-card blog-item" style="display: flex; flex-direction: column; height: 100%; transition: transform 0.3s;" data-title="Teknologi Smart Home: Mengontrol Rumah dari Smartphone" data-date="2025-07-01" data-category="Teknologi" data-tags="smart-home, iot, otomasi">
        <img src="images/5.jpg" alt="Blog 6" style="width: 100%; height: 200px; object-fit: cover; border-radius: 15px; margin-bottom: 15px;" />
        <div style="flex: 1; display: flex; flex-direction: column;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <span style="color: green; font-size: 12px; font-weight: bold; background: rgba(78, 161, 255, 0.1); padding: 4px 8px; border-radius: 10px;"> Belum dibikin blog nya, sabar ya</span>
            <span style="color: #ccc; font-size: 12px;">14 Juli 2025</span>
          </div>
          <h3 style="color: white; font-weight: bold; font-size: 18px; margin: 0 0 10px 0; line-height: 1.4;">
             Belum dibikin blog nya, sabar ya
          </h3>
          <p style="color: #ccc; margin: 0 0 15px 0; line-height: 1.5; font-size: 14px; flex-grow: 1;">
             saya bakal bikin blog nya sesuai waktu ya......
          </p>
          <a href="#" style="color: #4ea1ff; font-weight: bold; text-decoration: none; display: inline-flex; align-items: center; font-size: 14px; margin-top: auto;">
            Baca selengkapnya
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 5px;">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div style="display: flex; justify-content: space-between; align-items: center; width: 100%; margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
      <button id="prevPage" style="
        padding: 8px 16px;
        background: transparent;
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 8px;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        transition: all 0.3s;
      ">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Sebelumnya
      </button>
      
      <div style="display: flex; gap: 5px;">
        <button class="page-btn active" data-page="1" style="
          width: 35px;
          height: 35px;
          border-radius: 50%;
          background: rgba(78, 161, 255, 0.2);
          border: 1px solid rgba(78, 161, 255, 0.5);
          color: white;
          cursor: pointer;
          transition: all 0.3s;
        ">1</button>
        <button class="page-btn" data-page="2" style="
          width: 35px;
          height: 35px;
          border-radius: 50%;
          background: transparent;
          border: 1px solid rgba(255,255,255,0.2);
          color: white;
          cursor: pointer;
          transition: all 0.3s;
        ">2</button>
        <button class="page-btn" data-page="3" style="
          width: 35px;
          height: 35px;
          border-radius: 50%;
          background: transparent;
          border: 1px solid rgba(255,255,255,0.2);
          color: white;
          cursor: pointer;
          transition: all 0.3s;
        ">3</button>
        <span style="color: white; display: flex; align-items: center; padding: 0 10px;">...</span>
        <button class="page-btn" data-page="8" style="
          width: 35px;
          height: 35px;
          border-radius: 50%;
          background: transparent;
          border: 1px solid rgba(255,255,255,0.2);
          color: white;
          cursor: pointer;
          transition: all 0.3s;
        ">8</button>
      </div>
      
      <button id="nextPage" style="
        padding: 8px 16px;
        background: transparent;
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 8px;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        transition: all 0.3s;
      ">
        Selanjutnya
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </button>
    </div>
  </div>
  
  <div class="bottom-line"></div>

    <div class="bottom-text">
      <div>
        <a href="#" class="tentangLink">

          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Tentang Kami
        </a>
      </div>
      <div>
        <a href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Masukan
        </a>
      </div>
      <div>
        <a href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
          Saran
        </a>
      </div>
    </div>

  <div class="nav-link">
    <a href="#" id="back-page5">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 5 5 12 12 19"></polyline>
      </svg>
      Kembali
    </a>
  </div>
  
  <a href="https://faridardiansyah.netlify.app/#" target="_blank" style="
    position: fixed;
    bottom: 20px;
    right: 30px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 10px 20px;
    color: white;
    font-size: 16px;
    font-weight: 500;
    text-decoration: none;
    z-index: 999;
  ">
    Powered by: Manusia
  </a>
</div>


<!-- Halaman 6 - Tentang Kami -->
<div id="page6" style="display:none;">
  
  <h1 style="color: white; font-size: 39px; margin: 20px 0 30px 180px;">Tentang Kami</h1>
  <div class="line-box" style="flex-direction: column; align-items: flex-start; gap: 30px;">
  
    <div style="color: white; font-size: 25px;">
      Diperbarui <span id="tentangKamiTime">baru saja</span>
    </div>
  

  <div id="dynamicText" style="margin-top: 50px; font-size: 40px; font-weight: bold; color: #ffffff; text-align: center;">
    Life Is What It Is Learn
  </div>

    <div style="color: white; font-size: 29px; line-height: 1.7;">
     Life Is What It Is Learn adalah website pengalaman hidup yang terus menerus tetap berjalan tanpa ada satupun yang support saya dalam hal apapun, maka nya saya terus belajar sampai meninggal, melupakan orang lain dan melupakan nyari pasangan. <br><br>
      Kunjungi Portfolio saya: 
      <a href="https://faridardiansyah.netlify.app/" target="_blank" style="color: red;">Portfolio Farid Ardiansyah</a>
    </div>
	
	<div style="color: white; font-size: 29px; line-height: 1.7;">
     saya terus belajar dan belajar tentang pemrograman, illustration character, saya terus perbaiki kesalahan dan kekurangan. kamu bisa diskusi di forum chat.
      <a href="https://forumchat-faridardiansyah.netlify.app/" target="_blank" style="color: green;">Forum Chat</a>
    </div>

    <img src="images/5.jpg" alt="Tentang Kami" style="width: 500px; border-radius: 20px;" />


  <div class="nav-link">
    <a href="#" id="back-tentang">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 5 5 12 12 19"></polyline>
      </svg>
      Kembali
    </a>
  </div>
</div>
</div>
</div>









<!-- Halaman 7 - Masukan -->
<div id="page7" style="display: none;">
  <div id="dynamicText" style="margin-top: 50px; font-size: 40px; font-weight: bold; color: #ffffff; text-align: center;"></div>
  
  <h1 style="color: white; font-size: 28px; margin: 30px 0 20px 180px;">Halaman Masukan</h1>
  
  <div class="line-box" style="flex-direction: column; align-items: flex-start; gap: 30px; padding: 40px; border-radius: 20px; background: rgba(0, 0, 0, 0.3); margin: 0 100px;">
    <!-- Header dengan info feedback -->
    <div style="width: 100%; display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <div id="feedbackCountDisplay" style="color: #ccc; font-size: 16px;">
        Menampilkan semua masukan
      </div>
      <div style="display: flex; gap: 10px;">
        <button id="sortNewest" class="sort-btn active" style="
          padding: 8px 15px;
          background: rgba(78, 161, 255, 0.2);
          border: 1px solid rgba(78, 161, 255, 0.5);
          border-radius: 20px;
          color: #4ea1ff;
          font-size: 14px;
          cursor: pointer;
        ">
          Terbaru
        </button>
        <button id="sortPopular" class="sort-btn" style="
          padding: 8px 15px;
          background: rgba(255,255,255,0.05);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 20px;
          color: white;
          font-size: 14px;
          cursor: pointer;
        ">
          Populer
        </button>
      </div>
    </div>

    <!-- Form Pengumuman (Hanya untuk Admin/Kontributor) -->
    <div id="adminAnnouncementForm" style="width: 100%; margin-bottom: 30px; display: none; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
      <h2 style="color: white; font-size: 22px; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
        Buat Pengumuman
      </h2>
      
      <form id="announcementForm" style="display: grid; grid-template-columns: 1fr; gap: 20px;">
        <div>
          <label for="announcementTitle" style="color: white; display: block; margin-bottom: 8px; font-size: 16px;">Judul Pengumuman</label>
          <input type="text" id="announcementTitle" placeholder="Contoh: Pemeliharaan Sistem" 
                 style="width: 100%; padding: 12px 15px; border-radius: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: white;">
        </div>
        
        <div>
          <label for="announcementContent" style="color: white; display: block; margin-bottom: 8px; font-size: 16px;">Isi Pengumuman</label>
          <textarea id="announcementContent" rows="5" placeholder="Tulis pengumuman Anda..." 
                    style="width: 100%; padding: 12px 15px; border-radius: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: white;"></textarea>
        </div>
        
        <div style="display: flex; justify-content: flex-end;">
          <button type="submit" id="submitAnnouncement" style="padding: 12px 25px; background: linear-gradient(135deg, #ff6b6b, #ff0000); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
            Kirim Pengumuman
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 8px;">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
          </button>
        </div>
      </form>
    </div>

    <div id="pinnedAnnouncementsContainer" style="width: 100%; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
      <h2 style="color: #ff6b6b; margin-bottom: 15px; font-size: 22px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">Pengumuman Penting</h2>
      <div id="pinnedAnnouncementsList"></div>
    </div>
    
    <div id="feedbackHistory" style="width: 100%; margin-bottom: 30px; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
      <h2 style="color: white; font-size: 22px; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
        Riwayat Masukan
      </h2>
      <div id="feedbackListContainer" style="display: flex; flex-direction: column; gap: 15px;">
        <!-- Feedback items will be added here dynamically -->
      </div>
    </div>
    
    <!-- Form masukan baru -->
    <div id="newFeedbackForm" style="width: 100%; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
      <h2 style="color: white; font-size: 22px; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
        Kirim Masukan Baru
      </h2>
      
      <form id="masukanForm" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <!-- Kolom 1 - Judul Masukan -->
        <div style="grid-column: 1;">
          <label for="feedbackTitle" style="color: white; display: block; margin-bottom: 8px; font-size: 16px;">Judul Masukan</label>
          <input type="text" id="feedbackTitle" placeholder="Contoh: Perbaikan desain halaman utama" 
                 style="width: 100%; padding: 12px 15px; border-radius: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: white;">
        </div>
        
        <!-- Kolom 2 - Kategori -->
        <div style="grid-column: 2;">
          <label for="feedbackCategory" style="color: white; display: block; margin-bottom: 8px; font-size: 16px;">Kategori</label>
        <select id="feedbackCategory" style="width: 100%; padding: 12px 15px; border-radius: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: white; required">
    <option value="design">Desain</option>
    <option value="feature">Fitur</option>
    <option value="content">Konten</option>
    <option value="bug">Bug/Masalah</option>
    <option value="arduino">Arduino</option>
    <option value="other">Lainnya</option>
</select>
        </div>
        
        <!-- Kolom 3 - Isi Masukan (full width) -->
        <div style="grid-column: 1 / span 2;">
          <label for="feedbackContent" style="color: white; display: block; margin-bottom: 8px; font-size: 16px;">Isi Masukan</label>
          <textarea id="feedbackContent" rows="5" placeholder="Tulis masukan Anda secara detail..." 
                    style="width: 100%; padding: 12px 15px; border-radius: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: white;"></textarea>
        </div>
        
        <!-- Tombol Submit -->
        <div style="grid-column: 1 / span 2; display: flex; justify-content: flex-end;">
          <button type="submit" id="submitFeedback" style="padding: 12px 25px; background: linear-gradient(135deg, #4ea1ff, #0066ff); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
            Kirim Masukan
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 8px;">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal untuk Reply -->
  <div id="replyModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; justify-content: center; align-items: center;">
    <div style="background: #1a1a1a; border-radius: 15px; padding: 30px; width: 600px; max-width: 90%; max-height: 90vh; overflow-y: auto;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="color: white; font-size: 24px;">Balas Masukan</h2>
        <button id="closeReplyModal" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer;">&times;</button>
      </div>
      
      <div id="originalFeedback" style="margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;"></div>
      
      <form id="replyForm">
        <textarea id="replyContent" rows="5" placeholder="Tulis balasan Anda..." style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; margin-bottom: 20px;"></textarea>
        
        <div style="display: flex; justify-content: flex-end; gap: 10px;">
          <button type="button" id="cancelReply" style="padding: 10px 20px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; cursor: pointer;">
            Batal
          </button>
          <button type="submit" id="submitReply" style="padding: 10px 20px; background: linear-gradient(135deg, #4ea1ff, #0066ff); border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer;">
            Kirim Balasan
          </button>
        </div>
      </form>
    </div>
  </div>
  
  <div class="bottom-line"></div>

  <div class="bottom-text">
    <div>
      <a href="#" class="tentangLink">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
        Tentang Kami
      </a>
    </div>
    <div>
      <a href="#" class="masukanLink">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
        Masukan
      </a>
    </div>
    <div>
      <a href="#">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
        Saran
      </a>
    </div>
  </div>

  <div class="nav-link">
    <a href="#" id="back-masukan">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 5 5 12 12 19"></polyline>
      </svg>
      Kembali
    </a>
  </div>
</div>













<!-- Halaman 8 - Diskusi Forum -->
<div id="page8" style="display:none;">
  <div id="dynamicText" style="margin-top: 50px; font-size: 40px; font-weight: bold; color: #ffffff; text-align: center;"></div>
  
  <h1 style="color: white; font-size: 39px; margin: 20px 0 30px 180px;">Diskusi Forum</h1>
  
  <div class="line-box" style="flex-direction: column; align-items: flex-start; gap: 30px; padding: 40px;">
    <!-- Header dengan search dan filter -->
    <div style="width: 100%; display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
      <div style="display: flex; gap: 10px; align-items: center;">
        <div style="position: relative;">
          <input type="text" id="forumSearch" placeholder="Cari diskusi..." style="
            padding: 10px 15px;
            padding-right: 40px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            color: white;
            font-size: 16px;
            width: 300px;
          ">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ccc" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
          ">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </div>
        <button id="searchForumBtn" style="
          padding: 10px 15px;
          background: rgba(78, 161, 255, 0.2);
          border: 1px solid rgba(78, 161, 255, 0.5);
          border-radius: 20px;
          color: #4ea1ff;
          font-size: 16px;
          cursor: pointer;
          transition: all 0.3s;
        ">
          Cari
        </button>
      </div>
	  
	  
	  <button id="newDiscussionBtn" style="padding: 10px 20px;background: linear-gradient(135deg, #4ea1ff, #0066ff);border: none;border-radius: 10px;color: white;font-weight: bold;cursor: pointer;display: flex;align-items: center;gap: 8px;">
  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <line x1="12" y1="5" x2="12" y2="19"></line>
    <line x1="5" y1="12" x2="19" y2="12"></line>
  </svg>
  Diskusi Baru
</button>
   
   <!-- Modal untuk Diskusi Baru -->
<div id="newDiscussionModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; justify-content: center; align-items: center;">
  <div style="background: #1a1a1a; border-radius: 15px; padding: 30px; width: 600px; max-width: 90%; max-height: 90vh; overflow-y: auto;">
    <h2 style="color: white; font-size: 24px; margin-bottom: 20px;">Buat Diskusi Baru</h2>
    <form id="newDiscussionForm">
      <div style="margin-bottom: 20px;">
        <label style="color: white; display: block; margin-bottom: 8px;">Judul Diskusi</label>
        <input type="text" id="discussionTitle" required style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
      </div>
      <div style="margin-bottom: 20px;">
        <label style="color: white; display: block; margin-bottom: 8px;">Kategori</label>
        <select id="discussionCategory" required style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
          <option value="">Pilih Kategori</option>
          <option value="arduino">Arduino</option>
          <option value="iot">IoT</option>
          <option value="pemrograman">Pemrograman</option>
          <option value="elektronik">Elektronik</option>
          <option value="lainnya">Lainnya</option>
        </select>
      </div>
      <div style="margin-bottom: 20px;">
        <label style="color: white; display: block; margin-bottom: 8px;">Deskripsi Diskusi</label>
        <textarea id="discussionContent" rows="5" required style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;"></textarea>
      </div>
      <div style="display: flex; justify-content: flex-end; gap: 10px;">
        <button type="button" id="cancelDiscussion" style="padding: 10px 20px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; cursor: pointer;">Batal</button>
        <button type="submit" id="submitDiscussion" style="padding: 10px 20px; background: linear-gradient(135deg, #4ea1ff, #0066ff); border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer;">Buat Diskusi</button>
      </div>
    </form>
  </div>
</div>
</div>
   
   
   
   
   
    <!-- Kategori dan Tag -->
    <div style="width: 100%; margin-bottom: 20px;">
      <h2 style="color: white; font-size: 22px; margin-bottom: 15px;">Kategori Populer</h2>
      <div style="display: flex; flex-wrap: wrap; gap: 10px;">
        <button class="category-btn active" data-category="all" style="
          padding: 8px 15px;
          background: rgba(78, 161, 255, 0.2);
          border: 1px solid rgba(78, 161, 255, 0.5);
          border-radius: 20px;
          color: #4ea1ff;
          font-size: 14px;
          cursor: pointer;
        ">
          Semua
        </button>
        <button class="category-btn" data-category="arduino" style="
          padding: 8px 15px;
          background: rgba(255,255,255,0.05);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 20px;
          color: white;
          font-size: 14px;
          cursor: pointer;
        ">
          Arduino
        </button>
        <button class="category-btn" data-category="iot" style="
          padding: 8px 15px;
          background: rgba(255,255,255,0.05);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 20px;
          color: white;
          font-size: 14px;
          cursor: pointer;
        ">
          IoT
        </button>
        <button class="category-btn" data-category="pemrograman" style="
          padding: 8px 15px;
          background: rgba(255,255,255,0.05);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 20px;
          color: white;
          font-size: 14px;
          cursor: pointer;
        ">
          Pemrograman
        </button>
        <button class="category-btn" data-category="elektronik" style="
          padding: 8px 15px;
          background: rgba(255,255,255,0.05);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 20px;
          color: white;
          font-size: 14px;
          cursor: pointer;
        ">
          Elektronik
        </button>
      </div>
    </div>
    
    <!-- Filter Diskusi -->
    <div style="width: 100%; margin-bottom: 20px;">
      <h2 style="color: white; font-size: 22px; margin-bottom: 15px;">Filter Diskusi</h2>
      <div style="display: flex; gap: 10px; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 15px;">
        <button id="filterLatest" class="filter-btn active" data-filter="latest" style="
          padding: 8px 15px;
          background: rgba(78, 161, 255, 0.2);
          border: 1px solid rgba(78, 161, 255, 0.5);
          border-radius: 20px;
          color: #4ea1ff;
          font-size: 14px;
          cursor: pointer;
        ">
          Terbaru
        </button>
        <button id="filterHot" class="filter-btn" data-filter="hot" style="
          padding: 8px 15px;
          background: rgba(255,255,255,0.05);
          border: 1px solid rgba(255,255,255,0.2);
          border-radius: 20px;
          color: white;
          font-size: 14px;
          cursor: pointer;
        ">
          Populer
        </button>
      </div>
    </div>

    <!-- Header Tabel Diskusi -->
    <div class="forum-header">
      <div class="forum-column">Topik</div>
      <div class="forum-column">Balasan</div>
      <div class="forum-column">Dilihat</div>
      <div class="forum-column">Aktivitas</div>
    </div>
    <div class="forum-header-line"></div>
    
    <!-- Daftar Diskusi -->
    <div id="discussionList" style="width: 100%;"></div>
    
    <!-- Pagination -->
    <div style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 30px;">
      <button id="prevPageBtn" style="padding: 8px 15px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; cursor: pointer;">
        Sebelumnya
      </button>
      <div id="pageNumbers" style="display: flex; gap: 5px;"></div>
      <button id="nextPageBtn" style="padding: 8px 15px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; cursor: pointer;">
        Selanjutnya
      </button>
    </div>
  </div>
  
  <div class="bottom-line"></div>

  <div class="bottom-text">
    <div>
      <a href="#" class="tentangLink">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
        Tentang Kami
      </a>
    </div>
    <div>
      <a href="#" class="masukanLink">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
        Masukan
      </a>
    </div>
    <div>
      <a href="#">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg); margin-left: 8px;">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
        Saran
      </a>
    </div>
  </div>

  <div class="nav-link">
    <a href="#" id="back-forum">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 5 5 12 12 19"></polyline>
      </svg>
      Kembali
    </a>
  </div>
  
  <!-- Modal untuk Diskusi Baru -->
  <div id="newDiscussionModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; justify-content: center; align-items: center;">
    <div style="background: #1a1a1a; border-radius: 15px; padding: 30px; width: 600px; max-width: 90%; max-height: 90vh; overflow-y: auto;">
      <h2 style="color: white; font-size: 24px; margin-bottom: 20px;">Buat Diskusi Baru</h2>
      
      <form id="newDiscussionForm">
        <div style="margin-bottom: 20px;">
          <label style="color: white; display: block; margin-bottom: 8px;">Judul Diskusi</label>
          <input type="text" id="discussionTitle" required style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
        </div>
        
        <div style="margin-bottom: 20px;">
          <label style="color: white; display: block; margin-bottom: 8px;">Kategori</label>
          <select id="discussionCategory" required style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
            <option value="">Pilih Kategori</option>
            <option value="arduino">Arduino</option>
            <option value="iot">IoT</option>
            <option value="pemrograman">Pemrograman</option>
            <option value="elektronik">Elektronik</option>
            <option value="lainnya">Lainnya</option>
          </select>
        </div>
        
        <div style="margin-bottom: 20px;">
          <label style="color: white; display: block; margin-bottom: 8px;">Deskripsi Diskusi</label>
          <textarea id="discussionContent" rows="5" required style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;"></textarea>
        </div>
        
        <div style="display: flex; justify-content: flex-end; gap: 10px;">
          <button type="button" id="cancelDiscussion" style="padding: 10px 20px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; cursor: pointer;">
            Batal
          </button>
          <button type="submit" id="submitDiscussion" style="padding: 10px 20px; background: linear-gradient(135deg, #4ea1ff, #0066ff); border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer;">
            Buat Diskusi
          </button>
        </div>
      </form>
    </div>
  </div>
  
  <a href="https://faridardiansyah.netlify.app/#" target="_blank" style="
    position: fixed;
    bottom: 20px;
    right: 30px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    padding: 10px 20px;
    color: white;
    font-size: 16px;
    font-weight: 500;
    text-decoration: none;
    z-index: 999;
  ">
    Powered by: Manusia
  </a>









<div id="page9" style="display: none;">
  <div id="dynamicText" style="margin-top: 50px; font-size: 40px; font-weight: bold; color: #ffffff; text-align: center;">
    Detail Pengumuman Penting
  </div>

  <div class="line-box" style="flex-direction: column; align-items: flex-start; gap: 30px;">
    <h1 class="title-box">Judul Pengumuman</h1>
    <p class="desc-box">
      Ini adalah konten lengkap dari pengumuman penting. Kamu bisa menambahkan isi dinamis berdasarkan klik atau ID dari URL.
    </p>
  </div>


  <!-- Konten Pengumuman -->
  <div id="announcementDetailContainer" style="margin: 30px 100px 0 100px; padding: 30px; background: rgba(255,255,255,0.05); border-radius: 15px;">
    <!-- Konten akan dimuat oleh JavaScript -->
  </div>

  <!-- Form Edit (Admin) -->
  <div id="adminAnnouncementForm" style="display: none; width: calc(100% - 200px); margin: 30px 100px; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
    <h2 style="color: white; font-size: 22px; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
      Edit Pengumuman
    </h2>
    <form id="editAnnouncementForm" style="display: grid; grid-template-columns: 1fr; gap: 20px;">
      <div>
        <label for="editAnnouncementTitle" style="color: white; display: block; margin-bottom: 8px;">Judul Pengumuman</label>
        <input type="text" id="editAnnouncementTitle" style="width: 100%; padding: 12px; border-radius: 10px; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.2);">
      </div>
      <div>
        <label for="editAnnouncementContent" style="color: white; display: block; margin-bottom: 8px;">Isi Pengumuman</label>
        <textarea id="editAnnouncementContent" rows="5" style="width: 100%; padding: 12px; border-radius: 10px; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.2);"></textarea>
      </div>
      <div style="display: flex; justify-content: space-between;">
        <button type="button" id="cancelEditAnnouncement" style="padding: 10px 20px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: white; border-radius: 8px; cursor: pointer;">Batal</button>
        <button type="submit" id="submitEditAnnouncement" style="padding: 10px 20px; background: linear-gradient(135deg, #4ea1ff, #0066ff); border: none; color: white; border-radius: 8px; font-weight: bold; cursor: pointer;">Simpan Perubahan</button>
        <button type="button" id="deleteAnnouncement" style="padding: 10px 20px; background: linear-gradient(135deg, #ff6b6b, #ff0000); border: none; color: white; border-radius: 8px; font-weight: bold; cursor: pointer;">Hapus Pengumuman</button>
      </div>
    </form>
  </div>

  <!-- Balasan -->
  <div id="announcementRepliesContainer" style="width: calc(100% - 200px); margin: 30px 100px; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
    <h2 style="color: white; font-size: 22px; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
      Balasan (<span id="repliesCount">0</span>)
    </h2>
    <div id="announcementRepliesList" style="display: flex; flex-direction: column; gap: 15px;"></div>

    <!-- Form Balasan -->
    <form id="announcementReplyForm" style="margin-top: 20px; display: none;">
      <textarea id="announcementReplyContent" rows="5" placeholder="Tulis balasan Anda..." 
        style="width: 100%; padding: 12px; border-radius: 10px; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.2); margin-bottom: 15px;"></textarea>
      <div style="display: flex; justify-content: flex-end;">
        <button type="submit" style="padding: 12px 25px; background: linear-gradient(135deg, #4ea1ff, #0066ff); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer;">
          Kirim Balasan
        </button>
      </div>
    </form>

    <div id="loginToReply" style="text-align: center; padding: 20px; color: #ccc; display: none;">
      Silakan <a href="#" style="color: #4ea1ff;" id="loginLink">login</a> untuk membalas pengumuman ini.
    </div>
  </div>

  <!-- Pengumuman Terkait -->
  <div id="relatedAnnouncementsContainer" style="width: calc(100% - 200px); margin: 0 100px 30px; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px;">
    <h2 style="color: white; font-size: 22px; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
      Pengumuman Terkait
    </h2>
    <div id="relatedAnnouncementsList" style="display: flex; flex-direction: column; gap: 15px;"></div>
  </div>

  <!-- Tombol Kembali -->
  <div style="width: 100%; text-align: left; padding: 0 100px 40px;">
    <button id="backToAnnouncements" style="padding: 10px 20px; background: none; border: 1px solid rgba(255,255,255,0.3); border-radius: 8px; color: white; cursor: pointer;">
      ← Kembali ke Daftar Pengumuman
    </button>

    <button id="backToFeedbackPage" style="margin-left: 10px; padding: 10px 20px; background: none; border: 1px solid #4ea1ff; color: #4ea1ff; border-radius: 8px; cursor: pointer;">
      ← Kembali ke Halaman Masukan
    </button>
  </div>
</div>














<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp, query, orderBy, deleteDoc, getDoc, writeBatch, setDoc, doc, updateDoc, where, getDocs, documentId, limit, increment, getCountFromServer, arrayUnion, 
    arrayRemove, deleteField, runTransaction } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signInWithPopup, signOut, onAuthStateChanged, GoogleAuthProvider, setPersistence,
    browserLocalPersistence } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAzgMVdqZhrqQ3PqiSWapaCl6oglF3QP64",
        authDomain: "life-is-what-it-is-learn.firebaseapp.com",
        projectId: "life-is-what-it-is-learn",
        storageBucket: "life-is-what-it-is-learn.appspot.com",
        messagingSenderId: "755474876167",
        appId: "1:755474876167:web:205fb4ea8c7b8d5b66e7a2"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();
    const db = getFirestore(app);
    
    // DOM Elements
    const loginBtn = document.getElementById("loginBtn");
    const logoutBtn = document.getElementById("logoutBtn");
    const greeting = document.getElementById("greeting");
    const likeBtn = document.getElementById("likeBtn");
    const followBtn = document.getElementById("followBtn");

    // Authentication Functions
    if (loginBtn) {
        loginBtn.addEventListener("click", () => {
            signInWithPopup(auth, provider).catch(console.error);
        });
    }

    if (logoutBtn) {
        logoutBtn.addEventListener("click", () => {
            signOut(auth).catch(console.error);
        });
    }

    // Auth State Listener
    onAuthStateChanged(auth, (user) => {
        const greeting = document.getElementById("greeting");
        const loginBtn = document.getElementById("loginBtn");
        const logoutBtn = document.getElementById("logoutBtn");

        if (user) {
            document.getElementById("page1").style.display = "block";
            document.getElementById("page2").style.display = "none";
            document.getElementById("page3").style.display = "none";

            const hours = new Date().getHours();
            let greet = "Selamat malam";
            if (hours >= 5 && hours < 11) greet = "Selamat pagi";
            else if (hours >= 11 && hours < 15) greet = "Selamat siang";
            else if (hours >= 15 && hours < 18) greet = "Selamat sore";

            if (greeting) greeting.textContent = `${greet}, ${user.displayName}`;

            const dynamicText = document.getElementById("dynamicText");
            if (dynamicText) {
                const phrases = [
                    `Ada apa kamu di sini, ${user.displayName}?`,
                    `Lagi nyari inspirasi ya, ${user.displayName}?`,
                    `Selamat datang kembali, ${user.displayName}!`,
                    `Semangat belajar, ${user.displayName}!`,
                    `Mau ngoprek Arduino lagi, ${user.displayName}?`
                ];
                let index = 0;
                function changePhrase() {
                    dynamicText.textContent = phrases[index];
                    index = (index + 1) % phrases.length;
                }
                changePhrase();
                setInterval(changePhrase, 20000);
            }

            if (loginBtn) loginBtn.style.display = "none";
            if (logoutBtn) logoutBtn.style.display = "inline-block";
            if (likeBtn) likeBtn.disabled = false;
            if (followBtn) followBtn.disabled = false;

        } else {
            if (greeting) greeting.textContent = "";
            if (loginBtn) loginBtn.style.display = "inline-block";
            if (logoutBtn) logoutBtn.style.display = "none";
            if (likeBtn) likeBtn.disabled = true;
            if (followBtn) followBtn.disabled = true;

            const dynamicText = document.getElementById("dynamicText");
            if (dynamicText) dynamicText.textContent = "";
        }
    });

    // Page Management
    window.onload = function() {
        const page1 = document.getElementById("page1");
        const page2 = document.getElementById("page2");
        const page3 = document.getElementById("page3");
        const page4 = document.getElementById("page4");
        const page5 = document.getElementById("page5");
        const page6 = document.getElementById("page6");
        const page7 = document.getElementById("page7");
		  const page8 = document.getElementById("page8");
		    const page9 = document.getElementById("page9");

        // Format waktu lengkap
        function formatTanggalLengkap(date) {
            const hari = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
            const bulan = ["Januari", "Februari", "Maret", "April", "Mei", "Juni",
                        "Juli", "Agustus", "September", "Oktober", "November", "Desember"];
            return `${hari[date.getDay()]}, ${date.getDate()} ${bulan[date.getMonth()]} ${date.getFullYear()}`;
        }

        // Waktu terakhir update disimpan di localStorage
        let lastUpdatedTentang = localStorage.getItem("tentangLastUpdated");

        if (!lastUpdatedTentang) {
            lastUpdatedTentang = new Date("2025-07-14T00:00:00Z").toISOString();
            localStorage.setItem("tentangLastUpdated", lastUpdatedTentang);
        }

        function updateTentangRelativeTime() {
            const now = new Date();
            const updatedDate = new Date(localStorage.getItem("tentangLastUpdated"));
            const diffSec = Math.floor((now - updatedDate) / 1000);
            let waktu = "baru saja";

            if (diffSec >= 60 && diffSec < 3600)
                waktu = `${Math.floor(diffSec / 60)} menit yang lalu`;
            else if (diffSec >= 3600 && diffSec < 86400)
                waktu = `${Math.floor(diffSec / 3600)} jam yang lalu`;
            else if (diffSec >= 86400)
                waktu = `${Math.floor(diffSec / 86400)} hari yang lalu`;

            const lengkap = formatTanggalLengkap(updatedDate);
            const span = document.getElementById("tentangKamiTime");
            if (span) span.innerHTML = `${waktu} • ${lengkap}`;
        }

        // Update terus setiap 10 detik
        setInterval(updateTentangRelativeTime, 10000);
        updateTentangRelativeTime();

     
	 
	 
	 
	 // Fungsi utama untuk menampilkan halaman
function showPageContent(pageElement) {
  const pageIds = ["page1", "page2", "page3", "page4", "page5", "page6", "page7", "page8", "page9"];
  
  // Sembunyikan semua halaman
  pageIds.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.style.display = "none";
  });

  // Tampilkan halaman yang dipilih
  if (pageElement) {
    pageElement.style.display = "block";
    
    // Jika page7, muat pengumuman dan masukan
    if (pageElement.id === "page7") {
      loadPinnedAnnouncements();
      loadFeedback().catch(console.error);
    }
  }
  
  window.scrollTo(0, 0);
}




	 

        // Event listeners for navigation
        if (document.getElementById("card-arduino")) {
            document.getElementById("card-arduino").addEventListener("click", function() {
			 showPageContent(document.getElementById("page2"));
                history.pushState({ page: "arduino" }, "Arduino", "/halaman-arduino");
            });
        }

        if (document.getElementById("card-iot")) {
            document.getElementById("card-iot").addEventListener("click", function() {
                       showPageContent(document.getElementById("page3"));
                history.pushState({ page: "iot" }, "IoT", "/halaman-iot");
            });
        }

        if (document.getElementById("back")) {
            document.getElementById("back").addEventListener("click", function(e) {
                e.preventDefault();
				showPageContent(document.getElementById("page1"));
                
                history.pushState({ page: "home" }, "Beranda", "/");
            });
        }

        if (document.getElementById("back-iot")) {
            document.getElementById("back-iot").addEventListener("click", function(e) {
                e.preventDefault();
              showPageContent(document.getElementById("page1"));
                history.pushState({ page: "home" }, "Beranda", "/");
            });
        }

        if (document.getElementById("card-blog")) {
            document.getElementById("card-blog").addEventListener("click", function() {
                       showPageContent(document.getElementById("page4"));
                history.pushState({ page: "blog" }, "Blog", "/halaman-blog");
            });
        }

        if (document.getElementById("back-blog")) {
            document.getElementById("back-blog").addEventListener("click", function(e) {
                e.preventDefault();
              showPageContent(document.getElementById("page1"));
                history.pushState({ page: "home" }, "Beranda", "/");
            });
        }

        if (document.getElementById("lihatSemuaBlog")) {
            document.getElementById("lihatSemuaBlog").addEventListener("click", function(e) {
                e.preventDefault();
                showPageContent(document.getElementById("page5"));
                updateBlogCount();
                history.pushState({ page: "kumpulan-blog" }, "Kumpulan Blog", "/halaman-kumpulan-blog");
            });
        }

        if (document.getElementById("back-page5")) {
            document.getElementById("back-page5").addEventListener("click", function(e) {
                e.preventDefault();
               showPageContent(document.getElementById("page4"));
                history.pushState({ page: "blog" }, "Blog", "/halaman-blog");
            });
        }

        // Tentang kami navigation
        document.querySelectorAll('.tentangLink').forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                showPageContent(document.getElementById("page6"));
            });
        });

        if (document.getElementById('back-tentang')) {
            document.getElementById('back-tentang').addEventListener('click', e => {
                e.preventDefault();
                showPageContent(document.getElementById("page1"));
            });
        }

        // Masukan navigation
        document.querySelectorAll('.masukanLink').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
               showPageContent(document.getElementById("page7"));
                history.pushState({ page: "masukan" }, "Masukan", "/halaman-masukan");
                loadFeedback();
            });
        });

        if (document.getElementById('back-masukan')) {
            document.getElementById('back-masukan').addEventListener('click', function(e) {
                e.preventDefault();
               showPageContent(document.getElementById("page1"));
                history.pushState({ page: "home" }, "Beranda", "/");
            });
        }

        // Feedback form
        if (document.getElementById('masukanForm')) {
            document.getElementById('masukanForm').addEventListener('submit', submitFeedback);
        }

        // Like and Follow buttons
        if (likeBtn) {
            likeBtn.addEventListener('click', () => {
                alert("Kamu menyukai halaman ini!");
            });
        }

        if (followBtn) {
            followBtn.addEventListener('click', () => {
                alert("Kamu mengikuti halaman ini!");
            });
        }
		
		// Forum Diskusi navigation
document.querySelectorAll('.forumLink').forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
       showPageContent(document.getElementById("page8"));
        history.pushState({ page: "forum" }, "Forum", "/halaman-forum");
		initializeForumPage();
    });
});

if (document.getElementById('back-forum')) {
    document.getElementById('back-forum').addEventListener('click', function(e) {
        e.preventDefault();
        showPageContent(document.getElementById("page1"));
        history.pushState({ page: "home" }, "Beranda", "/");
    });
}
		
		
		
		window.addEventListener('load', function() {
    handleInitialNavigation();
    setupAnnouncementEventListeners();

    // Setup event listener untuk tombol kembali di halaman 9
    document.getElementById('backToAnnouncements')?.addEventListener('click', function() {
        showPageContent(document.getElementById("page7"));
        history.pushState({ page: "masukan" }, "Masukan", "/halaman-masukan");
    });
});

		
		
		
		
		
document.getElementById('announcementForm')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const title = document.getElementById('announcementTitle').value.trim();
    const content = document.getElementById('announcementContent').value.trim();
    
    if (!title || !content) {
        alert('Judul dan isi pengumuman tidak boleh kosong!');
        return;
    }
    
    const user = auth.currentUser;
    if (!user || !isUserAdmin(user)) {
        alert('Anda tidak memiliki izin untuk membuat pengumuman!');
        return;
    }
    
    const submitBtn = document.getElementById('submitAnnouncement');
    const originalBtnText = submitBtn.innerHTML;
    submitBtn.disabled = true;
    submitBtn.innerHTML = 'Mengirim...';
    
    try {
        const announcementData = {
    title,
    content,
    userEmail: user.email,
    userName: user.displayName || 'Admin',
    timestamp: serverTimestamp(),
    type: 'announcement',
    pinned: true,
    pinnedAt: serverTimestamp(),
    views: 0,
    likesCount: 0,
    repliesCount: 0
    // Tidak perlu slug
};

        const announcementsRef = collection(db, "announcements");
        await addDoc(announcementsRef, announcementData);

        // Reset form
        e.target.reset();
        alert('Pengumuman berhasil diposting!');
        
        // Muat ulang daftar pengumuman
        await loadPinnedAnnouncements();
        
    } catch (error) {
        console.error('Error submitting announcement:', error);
        alert('Gagal mengirim pengumuman: ' + error.message);
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalBtnText;
    }
});
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		

        // Blog functions
        function updateBlogCount() {
            const blogList = document.getElementById('blogList');
            if (!blogList) return;
            
            const visibleBlogs = document.querySelectorAll('#blogList .blog-item:not([style*="display: none"])').length;
            const totalBlog = document.querySelectorAll('#blogList .blog-item').length;
            
            const blogCountDisplay = document.getElementById('blogCountDisplay');
            if (blogCountDisplay) {
                blogCountDisplay.textContent = `Menampilkan ${visibleBlogs} dari ${totalBlog} Blog`;
            }
        }

        function searchBlogs() {
            const searchInput = document.getElementById('blogSearch');
            if (!searchInput) return;
            
            const searchTerm = searchInput.value.toLowerCase();
            const blogItems = document.querySelectorAll('.blog-item');
            
            blogItems.forEach(item => {
                const title = item.getAttribute('data-title')?.toLowerCase() || '';
                const category = item.getAttribute('data-category')?.toLowerCase() || '';
                const tags = item.getAttribute('data-tags')?.toLowerCase() || '';
                
                if (title.includes(searchTerm) || category.includes(searchTerm) || tags.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
            
            updateBlogCount();
        }

        // Time formatting functions
        function formatTimeAgo(timestamp) {
            if (!timestamp) return 'baru saja';
            
            const now = new Date();
            const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
            const diffInSeconds = Math.floor((now - date) / 1000);
            
            const options = { 
                day: 'numeric', 
                month: 'long', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            const fullDate = date.toLocaleDateString('id-ID', options);
            
            if (diffInSeconds < 60) return `baru saja • ${fullDate}`;
            if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} menit yang lalu • ${fullDate}`;
            if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} jam yang lalu • ${fullDate}`;
            
            return fullDate;
        }
		

     
	 
	 
	 
	 
	 
	 


// Fungsi untuk mendapatkan jumlah replies
async function getRepliesCount(feedbackId) {
    try {
        const repliesRef = collection(db, "feedback", feedbackId, "replies");
        const snapshot = await getCountFromServer(repliesRef);
        return snapshot.data().count;
    } catch (error) {
        console.error("Error getting replies count:", error);
        return 0;
    }
}

// Fungsi untuk mendapatkan jumlah likes
async function getLikesCount(feedbackId) {
    try {
        const likesRef = collection(db, "feedback", feedbackId, "likes");
        const snapshot = await getCountFromServer(likesRef);
        return snapshot.data().count;
    } catch (error) {
        console.error("Error getting likes count:", error);
        return 0;
    }
}

// Fungsi untuk memeriksa apakah user sudah like
async function checkUserLiked(feedbackId) {
    const user = auth.currentUser;
    if (!user) return false;
    
    try {
        const likeDoc = doc(db, "feedback", feedbackId, "likes", user.uid);
        const docSnap = await getDoc(likeDoc);
        return docSnap.exists();
    } catch (error) {
        console.error("Error checking user like:", error);
        return false;
    }
}













	 
	 
	 
	 // Fungsi untuk menampilkan masukan dari cache
function displayCachedFeedback() {
    const feedbackList = document.getElementById('feedbackListContainer');
    if (!feedbackList) return;
    
    const cachedFeedback = JSON.parse(localStorage.getItem('cachedFeedback') || "[]");
    
    if (cachedFeedback.length === 0) {
        feedbackList.innerHTML = '<div style="color:#ccc; text-align:center; padding:20px;">Belum ada masukan yang dikirim</div>';
        return;
    }
    
    feedbackList.innerHTML = '';
    cachedFeedback.forEach(item => {
        renderFeedbackItem(item.id, item);
    });
    
    updateFeedbackCount(cachedFeedback.length, true);
}
	 
	 
	 
	 // Event listener untuk form pengumuman
document.getElementById('announcementForm')?.addEventListener('submit', submitAnnouncement);

// Panggil saat auth state berubah
auth.onAuthStateChanged((user) => {
  toggleAdminForms();
  checkAndLoadFeedback();
});
	 
	 
	 
	 function showNotification(message, type = "info") {
  alert(`${type.toUpperCase()}: ${message}`);
}

	 
	 // Fungsi untuk merender item masukan dengan fitur tambahan (VERSI DIPERBAIKI)
function renderFeedbackItem(feedback, repliesCount = 0, likesCount = 0, userLiked = false) {
    const feedbackList = document.getElementById('feedbackListContainer');
    if (!feedbackList) return;
    
    
    // Pastikan kategori yang ditampilkan sesuai dengan yang disimpan
    const validCategories = ['design', 'feature', 'content', 'bug', 'arduino', 'other'];
    const category = feedback.category && validCategories.includes(feedback.category.toLowerCase()) 
        ? feedback.category.toLowerCase() 
        : 'other';
    const categoryClass = validCategories.includes(category) ? category : 'other';
    const categoryLabel = getCategoryLabel(category); // Gunakan fungsi getCategoryLabel
    


    const waktu = feedback.timestamp?.toDate ? feedback.timestamp.toDate() : new Date(feedback.timestamp || Date.now());
    const initials = feedback.userName ? feedback.userName.charAt(0).toUpperCase() : 'A';

    const feedbackItem = document.createElement('div');
    feedbackItem.className = 'feedback-item';
    feedbackItem.setAttribute('data-id', feedback.id);
    
    // Tambahkan class khusus untuk pengumuman
    if (feedback.type === 'announcement' || feedback.category === 'announcement') {
        feedbackItem.classList.add('announcement-item');
        feedbackItem.style.borderLeft = '4px solid #ff6b6b';
        feedbackItem.style.background = 'rgba(255, 107, 107, 0.05)';
    }
    
    feedbackItem.innerHTML = `
        <div class="feedback-header">
            <div class="feedback-user">
                <div class="feedback-avatar">${initials}</div>
                <div>
                    <div style="color: white; font-weight: 500;">${feedback.userName || 'Anonymous'}</div>
                    <div style="color: #aaa; font-size: 12px;">${feedback.userEmail || ''}</div>
                </div>
            </div>
            <div class="feedback-time" style="white-space: nowrap;">${formatTimeAgo(waktu)}${feedback.isCached ? ' (offline)' : ''}</div>
        </div>
        <div class="feedback-title">${feedback.title || 'Tanpa judul'}</div>
		<span class="feedback-category category-${categoryClass}">${categoryLabel}</span>
        <div class="feedback-content">${feedback.content || 'Tidak ada konten'}</div>
        
        <!-- Action buttons -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
            <div style="display: flex; gap: 15px;">
                <button class="like-btn" style="display: flex; align-items: center; background: none; border: none; color: ${userLiked ? '#4ea1ff' : '#ccc'}; cursor: pointer;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="${userLiked ? '#4ea1ff' : 'none'}" stroke="${userLiked ? '#4ea1ff' : '#ccc'}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
                    </svg>
                    <span class="like-count" style="margin-left: 5px;">${likesCount}</span>
                </button>
                <button class="reply-btn" style="display: flex; align-items: center; background: none; border: none; color: #ccc; cursor: pointer;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#ccc" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span class="reply-count" style="margin-left: 5px;">${repliesCount}</span>
                </button>
				
				 <div style="color:#ccc; display:flex; align-items:center;">
    👁️ <span class="view-count">${feedback.views || 0}</span>
  </div>
            </div>
            <button class="view-details-btn" style="background: none; border: none; color: #4ea1ff; cursor: pointer; font-size: 14px;">
                Lihat Detail
            </button>
        </div>
    `;

    feedbackList.appendChild(feedbackItem);
    
    // Add event listeners
    const likeBtn = feedbackItem.querySelector('.like-btn');
    const replyBtn = feedbackItem.querySelector('.reply-btn');
    const viewDetailsBtn = feedbackItem.querySelector('.view-details-btn');
    
    if (likeBtn) likeBtn.addEventListener('click', () => toggleLike(feedback.id));
    if (replyBtn) replyBtn.addEventListener('click', () => openReplyModal(feedback));
    if (viewDetailsBtn) viewDetailsBtn.addEventListener('click', () => viewFeedbackDetails(feedback.id));
    
    // Increment view count
    if (feedback.id) incrementViewCount(feedback.id);
}

	 
	 
	 
	 
	 
	 
	 
	 
// Fungsi untuk memeriksa dan memuat masukan saat halaman dimuat
function checkAndLoadFeedback() {
    const path = window.location.pathname || "/";
    if (path.includes("halaman-masukan") || 
        (window.history.state && window.history.state.page === "masukan")) {
        
        // Coba muat dari cache dulu untuk UX yang lebih cepat
        displayCachedFeedback();
        
        // Kemudian coba update dari Firebase
        loadFeedback().catch(console.error);
    }
}

	 
	 
	 // Fungsi untuk menambah jumlah view
async function incrementViewCount(feedbackId) {
    try {
        const feedbackRef = doc(db, "feedback", feedbackId);
        await updateDoc(feedbackRef, {
            views: increment(1)
        });
    } catch (error) {
        console.error("Error incrementing view count:", error);
    }
}

// Fungsi untuk like/unlike
async function toggleLike(feedbackId) {
    const user = auth.currentUser;
    if (!user) {
        alert('Silakan login terlebih dahulu untuk memberikan like');
        return;
    }
    
    try {
        const likeRef = doc(db, "feedback", feedbackId, "likes", user.uid);
        const likeDoc = await getDoc(likeRef);
        
        if (likeDoc.exists()) {
            // Unlike
            await deleteDoc(likeRef);
        } else {
            // Like
            await setDoc(likeRef, {
                userId: user.uid,
                timestamp: serverTimestamp()
            });
        }
        
        // Update UI
        const feedbackItem = document.querySelector(`.feedback-item[data-id="${feedbackId}"]`);
        if (feedbackItem) {
            const likeBtn = feedbackItem.querySelector('.like-btn');
            const likeCount = feedbackItem.querySelector('.like-count');
            const likeSvg = likeBtn.querySelector('svg');
            
            const currentCount = parseInt(likeCount.textContent);
            const isLiked = likeSvg.getAttribute('fill') === '#4ea1ff';
            
            if (isLiked) {
                // Unlike
                likeSvg.setAttribute('fill', 'none');
                likeSvg.setAttribute('stroke', '#ccc');
                likeBtn.style.color = '#ccc';
                likeCount.textContent = currentCount - 1;
            } else {
                // Like
                likeSvg.setAttribute('fill', '#4ea1ff');
                likeSvg.setAttribute('stroke', '#4ea1ff');
                likeBtn.style.color = '#4ea1ff';
                likeCount.textContent = currentCount + 1;
            }
        }
    } catch (error) {
        console.error("Error toggling like:", error);
        alert('Gagal mengupdate like. Silakan coba lagi nanti.');
    }
}

// Fungsi untuk membuka modal reply
function openReplyModal(feedback) {
    const user = auth.currentUser;
    if (!user) {
        alert('Silakan login terlebih dahulu untuk membalas masukan');
        return;
    }
    
    const modal = document.getElementById('replyModal');
    const originalFeedback = document.getElementById('originalFeedback');
    
    // Tampilkan feedback asli
    originalFeedback.innerHTML = `
        <div style="margin-bottom: 10px;">
            <strong style="color: white;">${feedback.userName || 'Anonymous'}</strong>
            <span style="color: #aaa; font-size: 12px; margin-left: 10px;">${formatTimeAgo(feedback.timestamp?.toDate?.() || new Date(feedback.timestamp))}</span>
        </div>
        <div style="color: white; font-weight: 500; margin-bottom: 5px;">${feedback.title}</div>
        <div style="color: #ddd;">${feedback.content}</div>
    `;
    
    // Reset form
    document.getElementById('replyContent').value = '';
    
    // Simpan feedback ID di modal
    modal.setAttribute('data-feedback-id', feedback.id);
    
    // Tampilkan modal
    modal.style.display = 'flex';
}

// Fungsi untuk menutup modal reply
function closeReplyModal() {
    document.getElementById('replyModal').style.display = 'none';
}

// Fungsi untuk mengirim reply
async function submitReply(e) {
    e.preventDefault();
    
    const user = auth.currentUser;
    if (!user) {
        alert('Silakan login terlebih dahulu untuk membalas masukan');
        return;
    }
    
    const feedbackId = document.getElementById('replyModal').getAttribute('data-feedback-id');
    const content = document.getElementById('replyContent').value.trim();
    
    if (!content) {
        alert('Isi balasan tidak boleh kosong');
        return;
    }
    
    const submitBtn = document.getElementById('submitReply');
    const originalBtnText = submitBtn.innerHTML;
    submitBtn.disabled = true;
    submitBtn.innerHTML = 'Mengirim... <span class="loading-spinner"></span>';
    
    try {
        // Tambahkan reply ke subcollection
        const repliesRef = collection(db, "feedback", feedbackId, "replies");
        await addDoc(repliesRef, {
            content,
            userId: user.uid,
            userName: user.displayName || 'Anonymous',
            userEmail: user.email,
            timestamp: serverTimestamp()
        });
        
        // Update reply count di feedback utama
        const feedbackRef = doc(db, "feedback", feedbackId);
        await updateDoc(feedbackRef, {
            replyCount: increment(1)
        });
        
        // Update UI
        const feedbackItem = document.querySelector(`.feedback-item[data-id="${feedbackId}"]`);
        if (feedbackItem) {
            const replyCount = feedbackItem.querySelector('.reply-count');
            const currentCount = parseInt(replyCount.textContent);
            replyCount.textContent = currentCount + 1;
        }
        
        // Tutup modal dan reset form
        closeReplyModal();
        
        // Tampilkan notifikasi sukses
        alert('Balasan berhasil dikirim!');
        
    } catch (error) {
        console.error("Error submitting reply:", error);
        alert('Gagal mengirim balasan. Silakan coba lagi nanti.');
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalBtnText;
    }
}

// Fungsi untuk melihat detail feedback dan replies
async function viewFeedbackDetails(feedbackId) {
    // Implementasi halaman detail feedback
    alert(`Membuka detail feedback dengan ID: ${feedbackId}`);
    // Anda bisa mengarahkan ke halaman baru atau membuka modal yang lebih besar
}

// Event listeners untuk modal reply
document.getElementById('closeReplyModal').addEventListener('click', closeReplyModal);
document.getElementById('cancelReply').addEventListener('click', closeReplyModal);
document.getElementById('replyForm').addEventListener('submit', submitReply);

// Event listeners untuk sorting
document.getElementById('sortNewest').addEventListener('click', function() {
    this.style.background = 'rgba(78, 161, 255, 0.2)';
    this.style.border = '1px solid rgba(78, 161, 255, 0.5)';
    this.style.color = '#4ea1ff';
    
    document.getElementById('sortPopular').style.background = 'rgba(255,255,255,0.05)';
    document.getElementById('sortPopular').style.border = '1px solid rgba(255,255,255,0.2)';
    document.getElementById('sortPopular').style.color = 'white';
    
    // Implementasi sorting terbaru
    loadFeedback();
});

document.getElementById('sortPopular').addEventListener('click', function() {
    this.style.background = 'rgba(78, 161, 255, 0.2)';
    this.style.border = '1px solid rgba(78, 161, 255, 0.5)';
    this.style.color = '#4ea1ff';
    
    document.getElementById('sortNewest').style.background = 'rgba(255,255,255,0.05)';
    document.getElementById('sortNewest').style.border = '1px solid rgba(255,255,255,0.2)';
    document.getElementById('sortNewest').style.color = 'white';
    
    // Implementasi sorting populer (berdasarkan jumlah like + reply)
    // Anda perlu memodifikasi query Firebase atau melakukan sorting client-side
    alert('Fitur sorting populer akan segera tersedia!');
});
	 
	 
	 
	 
	

// Event listener untuk form
document.getElementById('masukanForm')?.addEventListener('submit', submitFeedback);
// Panggil saat halaman dimuat dan setiap kali ada perubahan state
window.addEventListener('load', checkAndLoadFeedback);
window.addEventListener('popstate', checkAndLoadFeedback);

// Deteksi perubahan koneksi untuk refresh data
window.addEventListener('online', () => {
    if (window.location.pathname.includes("halaman-masukan")) {
        loadFeedback().catch(console.error);
    }
});
	 
	 

// Event listener untuk form
document.getElementById('masukanForm')?.addEventListener('submit', async function(e) {
    e.preventDefault();
  
     
    // Deklarasi semua variabel yang dibutuhkan
    const title = document.getElementById('feedbackTitle').value.trim();
    const category = document.getElementById('feedbackCategory').value;
    const content = document.getElementById('feedbackContent').value.trim();
    
    
    if (!title || !content) {
        alert('Judul dan isi masukan tidak boleh kosong!');
        return;
    }
    
    const submitBtn = document.getElementById('submitFeedback');
    const originalBtnText = submitBtn.innerHTML;
    submitBtn.disabled = true;
    submitBtn.innerHTML = 'Mengirim... <span class="loading-spinner"></span>';
    
    const user = auth.currentUser;
    const feedbackData = {
        title,
        category,
        content,
        userName: user?.displayName || 'Anonymous',
        userEmail: user?.email || null,
        userId: user?.uid || null,
        timestamp: serverTimestamp()
    };

    try {
        // Simpan ke Firebase
        const feedbackRef = collection(db, "feedback");
        await addDoc(feedbackRef, feedbackData);
        
        // Reset form
        e.target.reset();
        
        // Perbarui tampilan
        await loadFeedback();
        
    } catch (error) {
        console.error('Error submitting feedback:', error);
        alert('Gagal mengirim masukan. Pastikan Anda terhubung ke internet.');
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalBtnText;
    }
});



function getCategoryLabel(category) {
    const categoryMap = {
        'design': 'Desain',
        'feature': 'Fitur',
        'content': 'Konten',
        'bug': 'Bug/Masalah',
        'arduino': 'Arduino',
        'other': 'Lainnya'
    };
    
    const normalizedCategory = String(category).toLowerCase().trim();
    return categoryMap[normalizedCategory] || categoryMap['other'];
}




function renderPinnedAnnouncementItem(announcement) {
  const item = document.createElement("div");
  item.classList.add("announcement-item");

  // Pastikan judul bisa diklik dan memuat detail
  item.innerHTML = `
    <div class="announcement-title" style="cursor: pointer; color: yellow;" data-id="${announcement.id}">
      ${announcement.title}
    </div>
    <div class="announcement-date">${announcement.date}</div>
  `;

  item.querySelector(".announcement-title").addEventListener("click", () => {
    loadAnnouncementDetail(announcement.id);
  });

  return item;
}















// Fungsi submitFeedback yang diperbarui
async function submitFeedback(e) {
    e.preventDefault();
    
   
    const title = document.getElementById('feedbackTitle').value.trim();
    const category = document.getElementById('feedbackCategory').value;
const validCategories = ['design', 'feature', 'content', 'bug', 'arduino', 'other'];
const normalizedCategory = validCategories.includes(category) ? category : 'other';
    const content = document.getElementById('feedbackContent').value.trim();
    
    // Validasi input
    if (!title || !content) {
        showNotification('Judul dan isi masukan tidak boleh kosong!', 'error');
        return;
    }
    
   
    
    const submitBtn = document.getElementById('submitFeedback');
    const originalBtnText = submitBtn.innerHTML;
    submitBtn.disabled = true;
    submitBtn.innerHTML = 'Mengirim... <span class="loading-spinner"></span>';
    
    const user = auth.currentUser;
    const feedbackData = {
        title,
            category: normalizedCategory, // Pastikan kategori yang disimpan sudah dinormalisasi
        content,
        userName: user?.displayName || 'Anonymous',
        userEmail: user?.email || null,
        userId: user?.uid || null,
        timestamp: serverTimestamp(),
        status: 'new',
        likesCount: 0,
        repliesCount: 0,
        viewsCount: 0,
        isCached: false
    };

    try {
        const feedbackRef = collection(db, "feedback");
        const docRef = await addDoc(feedbackRef, feedbackData);
        
        // Update UI langsung dengan data baru
        const feedbackWithId = { ...feedbackData, id: docRef.id };
        
        // Dapatkan jumlah like dan reply (default 0)
        const [repliesCount, likesCount, userLiked] = await Promise.all([
            getRepliesCount(docRef.id),
            getLikesCount(docRef.id),
            checkUserLiked(docRef.id)
        ]);
        
        renderFeedbackItem(feedbackWithId, repliesCount, likesCount, userLiked);
        
        // Reset form
        e.target.reset();
        showNotification('Masukan berhasil dikirim!', 'success');
        
    } catch (error) {
        console.error('Error submitting feedback:', error);
        
        // Coba simpan ke cache jika offline
        if (error.code === 'unavailable') {
            try {
                const cachedFeedback = JSON.parse(localStorage.getItem('pendingFeedback') || "[]");
                cachedFeedback.push({
                    ...feedbackData,
                    timestamp: new Date().toISOString(),
                    category: category // Pastikan kategori yang disimpan sesuai
                });
                localStorage.setItem('pendingFeedback', JSON.stringify(cachedFeedback));
                showNotification('Masukan disimpan secara offline dan akan dikirim ketika online', 'warning');
            } catch (cacheError) {
                console.error('Error saving to cache:', cacheError);
                showNotification('Gagal mengirim masukan. Silakan coba lagi saat online.', 'error');
            }
        } else {
            showNotification('Gagal mengirim masukan: ' + error.message, 'error');
        }
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalBtnText;
    }
}

















// Fungsi pembantu untuk format waktu
function formatTimeAgo(timestamp) {
    if (!timestamp) return 'baru saja';
    
    const now = new Date();
    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
    const diffInSeconds = Math.floor((now - date) / 1000);
    
    const options = { 
        day: 'numeric', 
        month: 'long', 
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
    };
    const fullDate = date.toLocaleDateString('id-ID', options);
    
    if (diffInSeconds < 60) return `baru saja • ${fullDate}`;
    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} menit yang lalu • ${fullDate}`;
    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} jam yang lalu • ${fullDate}`;
    
    return fullDate;
}


	 
	 
	 
	 // Fungsi untuk update jumlah masukan
function updateFeedbackCount(count, isCached = false) {
    const feedbackCountDisplay = document.getElementById('feedbackCountDisplay');
    if (feedbackCountDisplay) {
        feedbackCountDisplay.textContent = isCached 
            ? `Menampilkan ${count} masukan (data offline)` 
            : `Menampilkan ${count} masukan terbaru`;
    }
}





async function loadFeedback() {
    const feedbackList = document.getElementById('feedbackListContainer');
    if (!feedbackList) return;

    try {
        // Tampilkan loading state
        feedbackList.innerHTML = '<div style="color:#ccc; text-align:center; padding:20px;">Memuat masukan...</div>';

        // Ambil data dari Firebase dengan sorting berdasarkan timestamp
        const q = query(
            collection(db, "feedback"), 
            orderBy("timestamp", "desc"),
            limit(50)
        );
        
        const querySnapshot = await getDocs(q);
        
        if (querySnapshot.empty) {
            feedbackList.innerHTML = '<div style="color:#ccc; text-align:center; padding:20px;">Belum ada masukan yang dikirim</div>';
            return;
        }

        // Render feedback dari Firebase
        feedbackList.innerHTML = '';
        const feedbackItems = [];
        
        // Gunakan Promise.all untuk menunggu semua operasi async selesai
        await Promise.all(querySnapshot.docs.map(async (doc) => {
            const feedback = doc.data();
            feedback.id = doc.id;
            feedbackItems.push(feedback);
            
            const [repliesCount, likesCount, userLiked] = await Promise.all([
                getRepliesCount(doc.id),
                getLikesCount(doc.id),
                checkUserLiked(doc.id)
            ]);
            
            renderFeedbackItem(feedback, repliesCount, likesCount, userLiked);
        }));

        // Simpan ke cache
        localStorage.setItem('cachedFeedback', JSON.stringify(feedbackItems));
        updateFeedbackCount(querySnapshot.size);

    } catch (error) {
        console.error("Error loading feedback:", error);
        displayCachedFeedback();
    }
}







// Daftar email yang diizinkan (admin/contributor)
const ALLOWED_EMAILS = ['faridardiansyah061@gmail.com'];


// Fungsi untuk mengecek apakah user adalah admin/contributor
function checkAdminStatus(user) {
  if (!user || !user.email) return false;
  return ALLOWED_EMAILS.includes(user.email.toLowerCase());
}









function toggleAdminForms() {
    const user = auth.currentUser;
    const isAdmin = isUserAdmin(user);
    
    // Toggle form admin di halaman 7
    const adminFormPage7 = document.getElementById('adminAnnouncementForm');
    if (adminFormPage7) {
        adminFormPage7.style.display = isAdmin ? 'block' : 'none';
    }
    
    // Toggle form admin di halaman 9
    const adminFormPage9 = document.querySelector('#page9 #adminAnnouncementForm');
    if (adminFormPage9) {
        adminFormPage9.style.display = isAdmin ? 'block' : 'none';
    }
}












// Fungsi untuk mengecek status admin dan menampilkan form edit jika admin
function setupAdminFormForAnnouncement(announcementId, announcement) {
  const user = auth.currentUser;
  const isAdmin = isUserAdmin(user);
  const adminForm = document.getElementById('adminAnnouncementForm');
  
  if (isAdmin && adminForm) {
    adminForm.style.display = 'block';

    // Isi form edit dengan data pengumuman
    document.getElementById('editAnnouncementTitle').value = announcement.title;
    document.getElementById('editAnnouncementContent').value = announcement.content;

    // Setup event listeners untuk form edit
    document.getElementById('editAnnouncementForm').onsubmit = (e) => {
      e.preventDefault();
      updateAnnouncement(announcementId);
    };

    document.getElementById('cancelEditAnnouncement').onclick = () => {
      adminForm.style.display = 'none';
    };

    document.getElementById('deleteAnnouncement').onclick = () => {
      if (confirm('Apakah Anda yakin ingin menghapus pengumuman ini?')) {
        deleteAnnouncement(announcementId);
      }
    };
  } else if (adminForm) {
    adminForm.style.display = 'none';
  }
}

// Panggil toggleAdminForms saat auth state berubah
auth.onAuthStateChanged((user) => {
  toggleAdminForms();
  checkAndLoadFeedback();
});







async function submitAnnouncement(e) {
    e.preventDefault();

    const title = document.getElementById('announcementTitle').value.trim();
    const content = document.getElementById('announcementContent').value.trim();

    if (!title || !content) {
        showNotification('Judul dan isi pengumuman tidak boleh kosong!', 'error');
        return;
    }

    const user = auth.currentUser;
    if (!user || !checkAdminStatus(user)) {
        showNotification('Anda tidak memiliki izin untuk membuat pengumuman!', 'error');
        return;
    }

    const submitBtn = document.getElementById('submitAnnouncement');
    const originalBtnText = submitBtn.innerHTML;
    submitBtn.disabled = true;
    submitBtn.innerHTML = 'Mengirim... <span class="loading-spinner"></span>';

    try {
        const announcementData = {
            title,
            content,
            userEmail: user.email,
            userName: user.displayName || 'Admin',
            timestamp: serverTimestamp(),
            type: 'announcement',
            pinned: true,
            pinnedAt: serverTimestamp(),
            views: 0,
            likesCount: 0,
            repliesCount: 0
        };

        // Add to Firestore
        const announcementsRef = collection(db, "announcements");
        const docRef = await addDoc(announcementsRef, announcementData);

        // Reset form
        e.target.reset();
        showNotification('Pengumuman berhasil diposting!', 'success');

        // Update cache
        const cachedAnnouncements = JSON.parse(localStorage.getItem('cachedAnnouncements') || '[]');
        cachedAnnouncements.unshift({
            ...announcementData,
            id: docRef.id
        });
        localStorage.setItem('cachedAnnouncements', JSON.stringify(cachedAnnouncements));

        // Reload announcements
        await loadPinnedAnnouncements();

    } catch (error) {
        console.error('Error submitting announcement:', error);
        showNotification('Gagal mengirim pengumuman: ' + error.message, 'error');
        
        // Try to save locally if offline
        if (error.code === 'unavailable') {
            const pendingAnnouncements = JSON.parse(localStorage.getItem('pendingAnnouncements') || '[]');
            pendingAnnouncements.push({
                title,
                content,
                timestamp: new Date().toISOString(),
                userName: user?.displayName || 'Admin'
            });
            localStorage.setItem('pendingAnnouncements', JSON.stringify(pendingAnnouncements));
            showNotification('Pengumuman disimpan offline dan akan dikirim ketika online', 'warning');
        }
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalBtnText;
    }
}




async function loadPinnedAnnouncements() {
    const pinnedContainer = document.getElementById('pinnedAnnouncementsList');
    if (!pinnedContainer) return;

    try {
        // Tampilkan loading state
        pinnedContainer.innerHTML = '<div style="color:#ccc; text-align:center; padding:20px;">Memuat pengumuman...</div>';

        // Query untuk mendapatkan pengumuman yang dipin
        const q = query(
            collection(db, "announcements"),
            where("pinned", "==", true),
            orderBy("pinnedAt", "desc"),
            limit(25)
        );
        
        const querySnapshot = await getDocs(q);
        
        if (querySnapshot.empty) {
            console.warn('Pengumuman kosong dari Firebase, coba tampilkan cache');
            displayCachedAnnouncements();
            return;
        }

        const announcements = [];
        
        // Gunakan Promise.all untuk parallel processing
        await Promise.all(querySnapshot.docs.map(async (doc) => {
            const announcement = doc.data();
            announcement.id = doc.id;
            
            // Dapatkan jumlah like dan reply
            const [likesCount, repliesCount] = await Promise.all([
                getAnnouncementLikesCount(doc.id),
                getAnnouncementRepliesCount(doc.id)
            ]);
            
            announcement.likesCount = likesCount;
            announcement.repliesCount = repliesCount;
            announcements.push(announcement);
            
            // Update view count
            await incrementAnnouncementViews(doc.id);
        }));

        // Simpan ke cache dengan timestamp
        const cacheData = {
            data: announcements,
            timestamp: new Date().getTime(),
            source: 'firebase'
        };
        localStorage.setItem('cachedAnnouncements', JSON.stringify(cacheData));
        
        // Render pengumuman
        renderAnnouncements(announcements);

    } catch (error) {
        console.error("Error loading pinned announcements:", error);
        // Fallback ke cache jika error
        displayCachedAnnouncements();
    }
}






















	 
	 
	 // Fungsi untuk toggle pin pengumuman
async function togglePinAnnouncement(announcementId, currentlyPinned) {
    const user = auth.currentUser;
    if (!checkAdminStatus(user)) {
        alert('Hanya admin yang dapat mem-pin pengumuman!');
        return;
    }

    try {
        const announcementRef = doc(db, "announcements", announcementId);
        
        if (currentlyPinned) {
            // Unpin
            await updateDoc(announcementRef, {
                pinned: false,
                pinnedAt: null
            });
        } else {
            // Pin
            await updateDoc(announcementRef, {
                pinned: true,
                pinnedAt: serverTimestamp()
            });
        }
        
        // Refresh daftar pengumuman
        await loadPinnedAnnouncements();
        
    } catch (error) {
        console.error("Error toggling pin:", error);
        alert('Gagal mengubah status pin. Silakan coba lagi.');
    }
}
	 
	 
	 
	 
	 
	 // Fungsi untuk mencoba mengirim pending feedback saat online
async function sendPendingFeedback() {
    const pendingFeedback = JSON.parse(localStorage.getItem('pendingFeedback') || "[]");
    if (pendingFeedback.length === 0) return;

    try {
        const feedbackRef = collection(db, "feedback");
        
        for (const feedback of pendingFeedback) {
            await addDoc(feedbackRef, {
                ...feedback,
                timestamp: serverTimestamp(),
                isCached: true
            });
        }
        
        // Kosongkan cache setelah berhasil dikirim
        localStorage.removeItem('pendingFeedback');
        showNotification(`${pendingFeedback.length} masukan offline berhasil dikirim`, 'success');
        
    } catch (error) {
        console.error('Error sending pending feedback:', error);
    }
}

// Panggil saat online
window.addEventListener('online', sendPendingFeedback);








function renderAnnouncements(announcements) {
    const pinnedContainer = document.getElementById('pinnedAnnouncementsList');
    if (!pinnedContainer) return;

    pinnedContainer.innerHTML = '';

    announcements.forEach(announcement => {
        const waktu = announcement.timestamp?.toDate ? announcement.timestamp.toDate() : new Date(announcement.timestamp);
        
        const announcementItem = document.createElement('div');
        announcementItem.className = 'pinned-item';
        announcementItem.setAttribute('data-id', announcement.id);

        announcementItem.style.cssText = `
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 107, 107, 0.1);
            border-left: 4px solid #ff6b6b;
            cursor: pointer;
        `;
        
        announcementItem.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                <h3 style="color: #ff6b6b; margin: 0; font-size: 18px; display: flex; align-items: center; gap: 8px;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#ff6b6b">
                        <path d="M16 12V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v8l-2 2v1h15v-1l-2-2z"/>
                    </svg>
                    ${announcement.title}
                </h3>
                <div style="color: #aaa; font-size: 12px;">${formatTimeAgo(waktu)}</div>
            </div>
            <div style="color: #ddd; margin-top: 8px; line-height: 1.5;">
                ${announcement.content.substring(0, 150)}${announcement.content.length > 150 ? '...' : ''}
            </div>
          
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div style="color: #aaa; font-size: 12px; font-style: italic;">
                    Diposting oleh: ${announcement.userName || 'Admin'}
                </div>
                <div style="display: flex; gap: 10px;">
                    <span style="color: #ccc; font-size: 12px; display: flex; align-items: center;">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <span class="view-count" style="margin-left: 5px;">${announcement.views || 0}</span>
                    </span>
                    <button class="like-btn" style="display: flex; align-items: center; background: none; border: none; color: #ccc; cursor: pointer;">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
                        </svg>
                        <span class="like-count" style="margin-left: 5px;">${announcement.likesCount || 0}</span>
                    </button>
                    <button class="reply-btn" style="display: flex; align-items: center; background: none; border: none; color: #ccc; cursor: pointer;">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                        <span class="reply-count" style="margin-left: 5px;">${announcement.repliesCount || 0}</span>
                    </button>
                </div>
            </div>
            <button class="view-announcement-btn" style="background: none; border: none; color: #4ea1ff; cursor: pointer; font-size: 14px;">
                Baca Selengkapnya
            </button>
        `;

        // Event listener untuk klik item pengumuman
        announcementItem.addEventListener('click', async (e) => {
            if (!e.target.closest('.like-btn, .reply-btn, .view-announcement-btn')) {
                e.preventDefault();
                const id = announcementItem.getAttribute('data-id');
                if (id) {
                    history.pushState({ page: "detail-pengumuman" }, "", `/halaman-masukan-${id}`);
                    await showAnnouncementDetailById(id);
                }
            }
        });

        pinnedContainer.appendChild(announcementItem);
        
        // Event listener untuk tombol like
        const likeBtn = announcementItem.querySelector('.like-btn');
        if (likeBtn) {
            likeBtn.addEventListener('click', async (event) => {
                event.stopPropagation();
                await toggleAnnouncementLike(announcement.id);
                const updatedLikes = await getAnnouncementLikesCount(announcement.id);
                announcementItem.querySelector('.like-count').textContent = updatedLikes;
            });
        }

        // Event listener untuk tombol reply
        const replyBtn = announcementItem.querySelector('.reply-btn');
        if (replyBtn) {
            replyBtn.addEventListener('click', (event) => {
                event.stopPropagation();
                viewAnnouncementDetails(announcement.id);
            });
        }

        // Event listener untuk tombol "Baca Selengkapnya"
        const viewBtn = announcementItem.querySelector('.view-announcement-btn');
        if (viewBtn) {
            viewBtn.addEventListener('click', async (event) => {
                event.stopPropagation();
                await viewAnnouncementDetails(announcement.id);
            });
        }
    });
}
















// Function to increment announcement views
async function incrementAnnouncementViews(announcementId) {
    try {
        const announcementRef = doc(db, "announcements", announcementId);
        await updateDoc(announcementRef, {
            views: increment(1),
            lastViewed: serverTimestamp()
        });
    } catch (error) {
        console.error("Error incrementing announcement views:", error);
    }
}






// Fungsi untuk toggle like pengumuman
async function toggleAnnouncementLike(announcementId) {
  const user = auth.currentUser;
  if (!user) {
    alert('Silakan login terlebih dahulu untuk memberikan like');
    return;
  }
  
  try {
    const likeRef = doc(db, "announcements", announcementId, "likes", user.uid);
    const likeDoc = await getDoc(likeRef);
    
    if (likeDoc.exists()) {
      // Unlike
      await deleteDoc(likeRef);
      await updateDoc(doc(db, "announcements", announcementId), {
        likesCount: increment(-1)
      });
    } else {
      // Like
      await setDoc(likeRef, {
        userId: user.uid,
        timestamp: serverTimestamp()
      });
      await updateDoc(doc(db, "announcements", announcementId), {
        likesCount: increment(1)
      });
    }
    
  } catch (error) {
    console.error("Error toggling announcement like:", error);
    throw error;
  }
}

// Fungsi untuk mendapatkan jumlah like pengumuman
async function getAnnouncementLikesCount(announcementId) {
  try {
    const docSnap = await getDoc(doc(db, "announcements", announcementId));
    return docSnap.data()?.likesCount || 0;
  } catch (error) {
    console.error("Error getting announcement likes count:", error);
    return 0;
  }
}









	 
	 function loadAnnouncements() {
  const container = document.getElementById("announcementContainer");
  container.innerHTML = "";

  firebase.database().ref('announcements').once('value', snapshot => {
    snapshot.forEach(child => {
      const data = child.val();
      const div = document.createElement("div");
      div.className = "feedback-item announcement-item";
      div.innerHTML = `
        <div class="feedback-title">${data.title}</div>
        <div class="feedback-content">${data.content}</div>
        <div style="margin-top:10px;">
          👁️ <span>${data.views || 0}</span>
          ❤️ <span>${data.likes || 0}</span>
          💬 <span>${(data.replies || []).length}</span>
        </div>
        <button onclick="likeAnnouncement('${child.key}')">Like</button>
        <button onclick="replyToAnnouncement('${child.key}')">Reply</button>
      `;
      container.appendChild(div);

      // Tambah view otomatis
      firebase.database().ref(`announcements/${child.key}/views`).transaction(v => (v || 0) + 1);
    });
  });
}








async function loadAnnouncementDetail(announcementId) {
    try {
        const container = document.getElementById('announcementDetailContainer');
        container.innerHTML = '<div style="color:#ccc; text-align:center; padding:30px;">Memuat pengumuman...</div>';
        
        const docRef = doc(db, "announcements", announcementId);
        const docSnap = await getDoc(docRef);
        
        if (!docSnap.exists()) {
            throw new Error("Pengumuman tidak ditemukan");
        }
        
        const announcement = docSnap.data();
        const waktu = announcement.timestamp?.toDate ? announcement.timestamp.toDate() : new Date();
        
        // Render the announcement
        container.innerHTML = `
            <div style="margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                    <h2 style="color: #ff6b6b; font-size: 28px; margin: 0;">${announcement.title}</h2>
                    <div style="color: #aaa; font-size: 14px;">${formatTimeAgo(waktu)}</div>
                </div>
                
                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                    <div class="feedback-avatar" style="width: 40px; height: 40px; font-size: 18px;">
                        ${announcement.userName?.charAt(0).toUpperCase() || 'A'}
                    </div>
                    <div>
                        <div style="color: white; font-weight: 500;">${announcement.userName || 'Admin'}</div>
                        <div style="color: #aaa; font-size: 12px;">${announcement.userEmail || ''}</div>
                    </div>
                </div>
                
                <div style="color: #ddd; font-size: 16px; line-height: 1.6; white-space: pre-line; margin-bottom: 20px;">
                    ${announcement.content}
                </div>
                
                <div style="display: flex; gap: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                    <button class="like-btn" style="display: flex; align-items: center; background: none; border: none; color: #ccc; cursor: pointer;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
                        </svg>
                        <span class="like-count" style="margin-left: 5px;">${announcement.likesCount || 0}</span>
                    </button>
                    
                    <div style="display: flex; align-items: center; color: #ccc;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <span class="view-count" style="margin-left: 5px;">${announcement.views || 0}</span>
                    </div>
                </div>
            </div>
        `;
        
        // Load replies
        await loadAnnouncementReplies(announcementId);
        
        // Setup admin controls if user is admin
        if (isUserAdmin(auth.currentUser)) {
            setupAdminAnnouncementUI(auth.currentUser, announcementId, announcement);
        }
        
    } catch (error) {
        console.error("Error loading announcement:", error);
        const container = document.getElementById('announcementDetailContainer');
        container.innerHTML = `
            <div style="color:#ff6b6b; text-align:center; padding:30px;">
                Gagal memuat pengumuman: ${error.message}
                <button onclick="backToFeedbackPage()" style="margin-top: 15px; padding: 8px 16px; background: none; border: 1px solid #ff6b6b; color: #ff6b6b; cursor: pointer;">
                    Kembali ke Halaman Masukan
                </button>
            </div>
        `;
    }
}
























// Fungsi untuk memuat balasan
async function loadAnnouncementReplies(announcementId) {
  const repliesList = document.getElementById('announcementRepliesList');
  repliesList.innerHTML = '<div style="color:#ccc; text-align:center; padding:20px;">Memuat balasan...</div>';
  
  try {
    const q = query(
      collection(db, "announcements", announcementId, "replies"),
      orderBy("timestamp", "asc")
    );
    
    const querySnapshot = await getDocs(q);
    repliesList.innerHTML = '';
    
    if (querySnapshot.empty) {
      repliesList.innerHTML = '<div style="color:#ccc; text-align:center; padding:20px;">Belum ada balasan</div>';
      return;
    }
    
    querySnapshot.forEach(doc => {
      const reply = doc.data();
      const waktu = reply.timestamp?.toDate ? reply.timestamp.toDate() : new Date();
      
      repliesList.innerHTML += `
        <div class="feedback-item" style="padding: 15px; background: rgba(255,255,255,0.03); border-radius: 10px;">
          <div class="feedback-header">
            <div class="feedback-user">
              <div class="feedback-avatar" style="width: 30px; height: 30px; font-size: 14px;">
                ${reply.userName?.charAt(0).toUpperCase() || 'U'}
              </div>
              <div>
                <div style="color: white; font-size: 14px; font-weight: 500;">${reply.userName || 'User'}</div>
                <div style="color: #aaa; font-size: 12px;">${formatTimeAgo(waktu)}</div>
              </div>
            </div>
          </div>
          <div class="feedback-content" style="margin-top: 10px; font-size: 15px; line-height: 1.5;">
            ${reply.content}
          </div>
        </div>
      `;
    });
    
    // Update replies count
    document.getElementById('repliesCount').textContent = querySnapshot.size;
  } catch (error) {
    console.error("Error loading replies:", error);
    repliesList.innerHTML = '<div style="color:#ff6b6b; text-align:center; padding:20px;">Gagal memuat balasan</div>';
  }
}










async function getAnnouncementLikesCount(announcementId) {
    try {
        const likesRef = collection(db, "announcements", announcementId, "likes");
        const snapshot = await getCountFromServer(likesRef);
        return snapshot.data().count;
    } catch (error) {
        console.error("Error getting likes count:", error);
        return 0;
    }
}

async function toggleAnnouncementLike(announcementId) {
    const user = auth.currentUser;
    if (!user) {
        alert('Silakan login untuk memberikan like');
        return;
    }
    
    try {
        const likeRef = doc(db, "announcements", announcementId, "likes", user.uid);
        const likeDoc = await getDoc(likeRef);
        
        if (likeDoc.exists()) {
            await deleteDoc(likeRef);
        } else {
            await setDoc(likeRef, {
                userId: user.uid,
                timestamp: serverTimestamp()
            });
        }
        
        // Update UI
        const likeBtn = document.querySelector('#page9 .like-btn');
        const likeCount = document.querySelector('#page9 .like-count');
        
        if (likeBtn && likeCount) {
            const currentCount = parseInt(likeCount.textContent);
            const isLiked = likeBtn.querySelector('svg').getAttribute('fill') !== 'none';
            
            likeBtn.querySelector('svg').setAttribute('fill', isLiked ? 'none' : 'currentColor');
            likeCount.textContent = isLiked ? currentCount - 1 : currentCount + 1;
        }
    } catch (error) {
        console.error("Error toggling announcement like:", error);
    }
}






// Fungsi untuk memuat pengumuman terkait
async function loadRelatedAnnouncements(currentAnnouncementId) {
  const relatedList = document.getElementById('relatedAnnouncementsList');
  relatedList.innerHTML = '<div style="color:#ccc; text-align:center; padding:10px;">Memuat pengumuman terkait...</div>';
  
  try {
    const q = query(
      collection(db, "announcements"),
      where("pinned", "==", true),
      orderBy("timestamp", "desc"),
      limit(3)
    );
    
    const querySnapshot = await getDocs(q);
    relatedList.innerHTML = '';
    
    let addedCount = 0;
    querySnapshot.forEach(doc => {
      if (doc.id === currentAnnouncementId || addedCount >= 3) return;
      
      addedCount++;
      const announcement = doc.data();
      const waktu = announcement.timestamp?.toDate ? announcement.timestamp.toDate() : new Date();
      
      relatedList.innerHTML += `
        <div class="related-item" style="padding: 15px; background: rgba(255,255,255,0.03); border-radius: 10px; cursor: pointer;"
             onclick="showAnnouncementDetail('${doc.id}')">
          <h3 style="color: #4ea1ff; font-size: 16px; margin-bottom: 5px;">
            ${announcement.title.substring(0, 50)}${announcement.title.length > 50 ? '...' : ''}
          </h3>
          <div style="color: #aaa; font-size: 14px;">
            ${announcement.content.substring(0, 80)}${announcement.content.length > 80 ? '...' : ''}
          </div>
          <div style="color: #666; font-size: 12px; margin-top: 5px;">${formatTimeAgo(waktu)}</div>
        </div>
      `;
    });
    
    if (addedCount === 0) {
      relatedList.innerHTML = '<div style="color:#ccc; text-align:center; padding:10px;">Tidak ada pengumuman terkait</div>';
    }
  } catch (error) {
    console.error("Error loading related announcements:", error);
    relatedList.innerHTML = '<div style="color:#ff6b6b; text-align:center; padding:10px;">Gagal memuat pengumuman terkait</div>';
  }
}





















// Fungsi untuk mendapatkan jumlah balasan
async function getAnnouncementRepliesCount(announcementId) {
  try {
    const repliesRef = collection(db, "announcements", announcementId, "replies");
    const snapshot = await getCountFromServer(repliesRef);
    return snapshot.data().count;
  } catch (error) {
    console.error("Error getting replies count:", error);
    return 0;
  }
}




async function viewAnnouncementDetails(announcementId) {
    try {
        // Ambil data pengumuman dari Firestore
        const docRef = doc(db, "announcements", announcementId);
        const docSnap = await getDoc(docRef);
        
        if (!docSnap.exists()) {
            throw new Error("Pengumuman tidak ditemukan");
        }
        
        const announcement = docSnap.data();
        const waktu = announcement.timestamp?.toDate ? announcement.timestamp.toDate() : new Date();
        
        // Render ke dalam container yang sama dengan halaman masukan
        const feedbackList = document.getElementById('feedbackListContainer');
        feedbackList.innerHTML = `
            <div class="feedback-item announcement-item" style="border-left: 4px solid #ff6b6b;">
                <div class="feedback-header">
                    <div class="feedback-user">
                        <div class="feedback-avatar">${announcement.userName?.charAt(0).toUpperCase() || 'A'}</div>
                        <div>
                            <div style="color: white; font-weight: 500;">${announcement.userName || 'Admin'}</div>
                            <div style="color: #aaa; font-size: 12px;">${announcement.userEmail || ''}</div>
                        </div>
                    </div>
                    <div class="feedback-time">${formatTimeAgo(waktu)}</div>
                </div>
                
                <div class="feedback-title">${announcement.title}</div>
                <div class="feedback-content" style="white-space: pre-line;">${announcement.content}</div>
                
                <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                    <button id="backToAnnouncements" style="background: none; border: none; color: #4ea1ff; cursor: pointer;">
                        ← Kembali ke Daftar Pengumuman
                    </button>
                </div>
            </div>
            
            <!-- Bagian untuk replies -->
            <div id="announcementRepliesContainer" style="margin-top: 30px;">
                <h3 style="color: white; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
                    Balasan (${announcement.repliesCount || 0})
                </h3>
                <div id="announcementRepliesList"></div>
                
                <form id="announcementReplyForm" style="margin-top: 20px;">
                    <textarea id="announcementReplyContent" rows="3" placeholder="Tulis balasan Anda..." 
                              style="width: 100%; padding: 10px; background: rgba(255,255,255,0.05); 
                                     border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; 
                                     color: white; margin-bottom: 10px;"></textarea>
                    <button type="submit" style="padding: 8px 15px; background: #4ea1ff; border: none; 
                                                border-radius: 8px; color: white; cursor: pointer;">
                        Kirim Balasan
                    </button>
                </form>
            </div>
        `;
        
        // Load replies
        await loadAnnouncementReplies(announcementId);
        
        // Tambahkan event listener untuk tombol kembali
        document.getElementById('backToAnnouncements').addEventListener('click', () => {
            loadPinnedAnnouncements();
        });
        
        // Tambahkan event listener untuk form reply
        document.getElementById('announcementReplyForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            await submitAnnouncementReply(announcementId);
        });
        
    } catch (error) {
        console.error("Error loading announcement:", error);
        const feedbackList = document.getElementById('feedbackListContainer');
        feedbackList.innerHTML = `
            <div class="feedback-item" style="color: #ff6b6b; text-align: center; padding: 30px;">
                Gagal memuat pengumuman: ${error.message}
                <button id="backToAnnouncements" style="display: block; margin: 20px auto; padding: 8px 15px; 
                                                     background: none; border: 1px solid #ff6b6b; 
                                                     color: #ff6b6b; cursor: pointer;">
                    Kembali ke Daftar Pengumuman
                </button>
            </div>
        `;
        document.getElementById('backToAnnouncements').addEventListener('click', () => {
            loadPinnedAnnouncements();
        });
    }
}






// Fungsi untuk render detail pengumuman
function renderAnnouncementDetail(announcement, waktu) {
  const container = document.getElementById('announcementDetailContainer');
  
  container.innerHTML = `
    <div style="margin-bottom: 20px;">
      <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
        <h2 style="color: #ff6b6b; font-size: 28px; margin: 0;">${announcement.title}</h2>
        <div style="color: #aaa; font-size: 14px;">${formatTimeAgo(waktu)}</div>
      </div>
      
      <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
        <div class="feedback-avatar" style="width: 40px; height: 40px; font-size: 18px;">
          ${announcement.userName?.charAt(0).toUpperCase() || 'A'}
        </div>
        <div>
          <div style="color: white; font-weight: 500;">${announcement.userName || 'Admin'}</div>
          <div style="color: #aaa; font-size: 12px;">${announcement.userEmail || ''}</div>
        </div>
      </div>
      
      <div style="color: #ddd; font-size: 16px; line-height: 1.6; white-space: pre-line; margin-bottom: 20px;">
        ${announcement.content}
      </div>
      
      <div style="display: flex; gap: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
        <button class="like-btn" style="display: flex; align-items: center; background: none; border: none; color: #ccc; cursor: pointer;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
          </svg>
          <span class="like-count" style="margin-left: 5px;">${announcement.likesCount || 0}</span>
        </button>
        
        <div style="display: flex; align-items: center; color: #ccc;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
          <span class="view-count" style="margin-left: 5px;">${announcement.views || 0}</span>
        </div>
      </div>
    </div>
  `;
  
  // Tambahkan event listener untuk like button
  container.querySelector('.like-btn').addEventListener('click', () => {
    toggleAnnouncementLike(announcement.id);
  });
}




function renderDetailPengumuman(data) {
  const detailContainer = document.getElementById("page9Content");
  if (!detailContainer) return;

  detailContainer.innerHTML = `
    <h2>${data.title}</h2>
    <p>${data.content}</p>
    <small>Dibuat oleh: ${data.author || "Anonim"}</small>
  `;
}



function isUserAdmin(user) {
    const ALLOWED_EMAILS = ['faridardiansyah061@gmail.com'];
    if (!user || !user.email) return false;
    return ALLOWED_EMAILS.includes(user.email.toLowerCase());
}








// Function to handle admin UI for announcements
function setupAdminAnnouncementUI(user, announcementId, announcement) {
  const adminForm = document.getElementById('adminAnnouncementForm');
  const isAdmin = isUserAdmin(user); // Use the separate function
  
  if (isAdmin) {
    adminForm.style.display = 'block';
    document.getElementById('editAnnouncementTitle').value = announcement.title;
    document.getElementById('editAnnouncementContent').value = announcement.content;

    document.getElementById('editAnnouncementForm').onsubmit = (e) => {
      e.preventDefault();
      updateAnnouncement(announcementId);
    };

    document.getElementById('cancelEditAnnouncement').onclick = () => {
      adminForm.style.display = 'none';
    };

    document.getElementById('deleteAnnouncement').onclick = () => {
      if (confirm('Apakah Anda yakin ingin menghapus pengumuman ini?')) {
        deleteAnnouncement(announcementId);
      }
    };
  } else {
    adminForm.style.display = 'none';
  }
}













// Fungsi untuk mengecek status admin dan menampilkan form edit jika admin
function checkAdminStatus(user, announcementId, announcement) {
const isAdmin = checkAdminStatus(user); // Use the existing function
  const adminForm = document.getElementById('adminAnnouncementForm');
  
  if (isAdmin) {
    adminForm.style.display = 'block';

    // Isi form edit dengan data pengumuman
    document.getElementById('editAnnouncementTitle').value = announcement.title;
    document.getElementById('editAnnouncementContent').value = announcement.content;

    // Setup event listeners untuk form edit
    document.getElementById('editAnnouncementForm').onsubmit = (e) => {
      e.preventDefault();
      updateAnnouncement(announcementId);
    };

    document.getElementById('cancelEditAnnouncement').onclick = () => {
      adminForm.style.display = 'none';
    };

    document.getElementById('deleteAnnouncement').onclick = () => {
      if (confirm('Apakah Anda yakin ingin menghapus pengumuman ini?')) {
        deleteAnnouncement(announcementId);
      }
    };
  } else {
    adminForm.style.display = 'none';
  }
}









// Fungsi untuk setup form reply berdasarkan status login
function setupReplyForm(announcementId) {
  const user = auth.currentUser;
  const replyForm = document.getElementById('announcementReplyForm');
  const loginToReply = document.getElementById('loginToReply');
  
  if (user) {
    replyForm.style.display = 'block';
    loginToReply.style.display = 'none';
    
    // Setup event listener untuk form reply
    replyForm.onsubmit = (e) => {
      e.preventDefault();
      submitAnnouncementReply(announcementId);
    };
  } else {
    replyForm.style.display = 'none';
    loginToReply.style.display = 'block';
    
    // Setup event listener untuk login link
    document.getElementById('loginLink').onclick = (e) => {
      e.preventDefault();
      // Implementasi login sesuai kebutuhan
      alert('Silakan login terlebih dahulu');
    };
  }
}












// Fungsi untuk update pengumuman (admin only)
async function updateAnnouncement(announcementId) {
  const title = document.getElementById('editAnnouncementTitle').value.trim();
  const content = document.getElementById('editAnnouncementContent').value.trim();
  
  if (!title || !content) {
    alert('Judul dan isi pengumuman tidak boleh kosong');
    return;
  }
  
  try {
    await updateDoc(doc(db, "announcements", announcementId), {
      title,
      content,
      lastUpdated: serverTimestamp()
    });
    
    alert('Pengumuman berhasil diperbarui');
    loadAnnouncementDetail(announcementId); // Refresh data
  } catch (error) {
    console.error("Error updating announcement:", error);
    alert('Gagal memperbarui pengumuman');
  }
}

// Fungsi untuk menghapus pengumuman (admin only)
async function deleteAnnouncement(announcementId) {
  try {
    await deleteDoc(doc(db, "announcements", announcementId));
    alert('Pengumuman berhasil dihapus');
    showPageContent(document.getElementById("page7")); // Kembali ke halaman masukan
  } catch (error) {
    console.error("Error deleting announcement:", error);
    alert('Gagal menghapus pengumuman');
  }
}










// Fungsi untuk mengirim balasan
async function submitAnnouncementReply(announcementId) {
  const content = document.getElementById('announcementReplyContent').value.trim();
  if (!content) {
    alert('Isi balasan tidak boleh kosong');
    return;
  }
  
  const user = auth.currentUser;
  if (!user) {
    alert('Silakan login untuk membalas');
    return;
  }
  
  const submitBtn = document.querySelector('#announcementReplyForm button[type="submit"]');
  const originalText = submitBtn.innerHTML;
  submitBtn.disabled = true;
  submitBtn.innerHTML = 'Mengirim...';
  
  try {
    // Tambahkan balasan
    await addDoc(collection(db, "announcements", announcementId, "replies"), {
      content,
      userId: user.uid,
      userName: user.displayName || 'Anonymous',
      userEmail: user.email,
      timestamp: serverTimestamp()
    });
    
    // Update reply count
    await updateDoc(doc(db, "announcements", announcementId), {
      repliesCount: increment(1)
    });
    
    // Reset form dan muat ulang balasan
    document.getElementById('announcementReplyContent').value = '';
    await loadAnnouncementReplies(announcementId);
    
  } catch (error) {
    console.error("Error submitting reply:", error);
    alert('Gagal mengirim balasan');
  } finally {
    submitBtn.disabled = false;
    submitBtn.innerHTML = originalText;
  }
}










// Fungsi untuk setup event listeners di halaman detail
function setupAnnouncementDetailEvents(announcementId) {
  // Tombol like
  document.querySelector('#announcementDetailContainer .like-btn')?.addEventListener('click', async () => {
    await toggleAnnouncementLike(announcementId);
    // Update like count
    const likesCount = await getAnnouncementLikesCount(announcementId);
    document.querySelector('#announcementDetailContainer .like-count').textContent = likesCount;
  });

  // Tombol kembali
  document.getElementById('backToAnnouncements')?.addEventListener('click', () => {
    document.getElementById('page9').style.display = 'none';
    document.getElementById('page7').style.display = 'block';
    history.pushState({ page: "masukan" }, "Halaman Masukan", "/halaman-masukan");
  });

  // Form balasan
  document.getElementById('announcementReplyForm')?.addEventListener('submit', async (e) => {
    e.preventDefault();
    await submitAnnouncementReply(announcementId);
  });
}

// Fungsi untuk menampilkan halaman error
function showErrorPage(message) {
  const container = document.getElementById('announcementDetailContainer');
  if (container) {
    container.innerHTML = `
      <div style="color: #ff6b6b; text-align: center; padding: 30px;">
        <h3 style="margin-bottom: 15px;">Terjadi Kesalahan</h3>
        <p style="margin-bottom: 20px;">${message}</p>
        <button onclick="location.reload()" style="padding: 8px 16px; background: #ff6b6b; color: white; border: none; border-radius: 4px; cursor: pointer;">
          Muat Ulang Halaman
        </button>
      </div>
    `;
  }
}

// Fungsi untuk mengirim balasan pengumuman
async function submitAnnouncementReply(announcementId) {
  const user = auth.currentUser;
  if (!user) {
    alert('Silakan login untuk membalas pengumuman');
    return;
  }

  const content = document.getElementById('announcementReplyContent').value.trim();
  if (!content) {
    alert('Isi balasan tidak boleh kosong');
    return;
  }

  const submitBtn = document.querySelector('#announcementReplyForm button[type="submit"]');
  const originalText = submitBtn.innerHTML;
  submitBtn.disabled = true;
  submitBtn.innerHTML = 'Mengirim...';

  try {
    // Tambahkan balasan ke Firestore
    const repliesRef = collection(db, "announcements", announcementId, "replies");
    await addDoc(repliesRef, {
      content,
      userId: user.uid,
      userName: user.displayName || 'Anonymous',
      userEmail: user.email,
      timestamp: serverTimestamp()
    });

    // Update jumlah balasan
    const announcementRef = doc(db, "announcements", announcementId);
    await updateDoc(announcementRef, {
      repliesCount: increment(1)
    });

    // Perbarui tampilan
    const repliesCount = await getAnnouncementRepliesCount(announcementId);
    document.getElementById('repliesCount').textContent = repliesCount;
    await loadAnnouncementReplies(announcementId);

    // Reset form
    document.getElementById('announcementReplyContent').value = '';

  } catch (error) {
    console.error("Error submitting reply:", error);
    alert('Gagal mengirim balasan');
  } finally {
    submitBtn.disabled = false;
    submitBtn.innerHTML = originalText;
  }
}

























// Global variables for forum
let allDiscussions = [];
let filteredDiscussions = [];
let currentPage = 1;
const discussionsPerPage = 10;





// Forum Diskusi Functions
function initializeForumPage() {
  // Load discussions from Firebase
  loadDiscussions();
  
  // Event listeners
  document.getElementById('searchForumBtn').addEventListener('click', searchDiscussions);
  document.getElementById('forumSearch').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') searchDiscussions();
  });
  
  // Category filter
  document.querySelectorAll('.category-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.category-btn').forEach(b => {
        b.style.background = 'rgba(255,255,255,0.05)';
        b.style.border = '1px solid rgba(255,255,255,0.2)';
        b.style.color = 'white';
      });
      
      this.style.background = 'rgba(78, 161, 255, 0.2)';
      this.style.border = '1px solid rgba(78, 161, 255, 0.5)';
      this.style.color = '#4ea1ff';
      
      const category = this.getAttribute('data-category');
      filterDiscussionsByCategory(category);
    });
  });
  
  // Discussion filter
  document.getElementById('filterLatest').addEventListener('click', function() {
    document.getElementById('filterLatest').style.background = 'rgba(78, 161, 255, 0.2)';
    document.getElementById('filterLatest').style.border = '1px solid rgba(78, 161, 255, 0.5)';
    document.getElementById('filterLatest').style.color = '#4ea1ff';
    
    document.getElementById('filterHot').style.background = 'rgba(255,255,255,0.05)';
    document.getElementById('filterHot').style.border = '1px solid rgba(255,255,255,0.2)';
    document.getElementById('filterHot').style.color = 'white';
    
    filterDiscussions('latest');
  });
  
  document.getElementById('filterHot').addEventListener('click', function() {
    document.getElementById('filterHot').style.background = 'rgba(244, 67, 54, 0.2)';
    document.getElementById('filterHot').style.border = '1px solid rgba(244, 67, 54, 0.5)';
    document.getElementById('filterHot').style.color = '#F44336';
    
    document.getElementById('filterLatest').style.background = 'rgba(255,255,255,0.05)';
    document.getElementById('filterLatest').style.border = '1px solid rgba(255,255,255,0.2)';
    document.getElementById('filterLatest').style.color = 'white';
    
    filterDiscussions('hot');
  });
  
  // New discussion modal
  document.getElementById('newDiscussionBtn').addEventListener('click', function() {
    const user = auth.currentUser;
    if (!user) {
      alert('Silakan login terlebih dahulu untuk membuat diskusi baru');
      return;
    }
    document.getElementById('newDiscussionModal').style.display = 'flex';
  });
  
  document.getElementById('cancelDiscussion').addEventListener('click', function() {
    document.getElementById('newDiscussionModal').style.display = 'none';
    document.getElementById('newDiscussionForm').reset();
  });
  
  document.getElementById('newDiscussionForm').addEventListener('submit', function(e) {
    e.preventDefault();
    createNewDiscussion();
  });
  
  // Pagination
  document.getElementById('prevPageBtn').addEventListener('click', goToPrevPage);
  document.getElementById('nextPageBtn').addEventListener('click', goToNextPage);
}


// Load discussions from Firebase
async function loadDiscussions() {
  try {
    const q = query(collection(db, "discussions"), orderBy("createdAt", "desc"));
    const querySnapshot = await getDocs(q);
    
    allDiscussions = [];
    querySnapshot.forEach(doc => {
      const discussion = doc.data();
      discussion.id = doc.id;
      allDiscussions.push(discussion);
    });
    
    filteredDiscussions = [...allDiscussions];
    displayDiscussions();
  } catch (error) {
    console.error("Error loading discussions:", error);
    alert("Gagal memuat diskusi. Silakan coba lagi nanti.");
  }
}

// Display discussions with pagination
function displayDiscussions() {
  const startIndex = (currentPage - 1) * discussionsPerPage;
  const endIndex = startIndex + discussionsPerPage;
  const paginatedDiscussions = filteredDiscussions.slice(startIndex, endIndex);
  
  const discussionList = document.getElementById('discussionList');
  discussionList.innerHTML = '';
  
  if (paginatedDiscussions.length === 0) {
    discussionList.innerHTML = '<div style="color: #ccc; text-align: center; padding: 40px;">Tidak ada diskusi yang ditemukan</div>';
    return;
  }
  
  paginatedDiscussions.forEach(discussion => {
    const discussionItem = document.createElement('div');
    discussionItem.className = 'bab-card discussion-item';
    discussionItem.style.marginBottom = '20px';
    discussionItem.style.padding = '20px';
    discussionItem.style.transition = 'all 0.3s';
    discussionItem.style.cursor = 'pointer';
    discussionItem.dataset.id = discussion.id;
    discussionItem.dataset.category = discussion.category;
    discussionItem.dataset.views = discussion.views || 0;
    discussionItem.dataset.replies = discussion.replyCount || 0;
    discussionItem.dataset.createdAt = discussion.createdAt?.toDate().getTime() || new Date().getTime();
    
    // Get first letter of author name for avatar
    const authorInitial = discussion.authorName ? discussion.authorName.charAt(0).toUpperCase() : 'A';
    
    // Format time
    const createdAt = discussion.createdAt?.toDate() || new Date();
    const timeAgo = formatTimeAgo(createdAt);
    
    discussionItem.innerHTML = `
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <div style="display: flex; align-items: center; gap: 10px;">
          <div style="width: 40px; height: 40px; border-radius: 50%; background-color: #4ea1ff; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
            ${authorInitial}
          </div>
          <div>
            <div style="color: white; font-weight: bold;">${discussion.authorName || 'Anonymous'}</div>
            <div style="color: #aaa; font-size: 12px;">${timeAgo}</div>
          </div>
        </div>
        <span style="color: ${getCategoryColor(discussion.category)}; font-size: 14px; background: ${getCategoryBackground(discussion.category)}; padding: 5px 10px; border-radius: 10px;">
          ${getCategoryLabel(discussion.category)}
        </span>
      </div>
      
      <h3 style="color: white; font-size: 20px; margin-bottom: 10px;">
        ${discussion.title}
      </h3>
      
      <p style="color: #ccc; margin-bottom: 15px; line-height: 1.6;">
        ${discussion.content.substring(0, 150)}${discussion.content.length > 150 ? '...' : ''}
      </p>
      
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div style="display: flex; gap: 15px;">
          <div style="display: flex; align-items: center; gap: 5px; color: #ccc;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
            </svg>
            ${discussion.likes || 0}
          </div>
          <div style="display: flex; align-items: center; gap: 5px; color: #ccc;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            ${discussion.replyCount || 0}
          </div>
          <div style="display: flex; align-items: center; gap: 5px; color: #ccc;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            ${discussion.views || 0}
          </div>
        </div>
        
        <a href="#" class="view-discussion" style="color: #4ea1ff; text-decoration: none; display: flex; align-items: center; gap: 5px;">
          Lihat diskusi
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4ea1ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </div>
    `;
    
    discussionList.appendChild(discussionItem);
    
    // Add click event to view discussion
    discussionItem.querySelector('.view-discussion').addEventListener('click', function(e) {
      e.preventDefault();
      viewDiscussion(discussion.id);
    });
  });
  
  // Update pagination
  updatePagination();
}

// Filter discussions by category
function filterDiscussionsByCategory(category) {
  if (category === 'all') {
    filteredDiscussions = [...allDiscussions];
  } else {
    filteredDiscussions = allDiscussions.filter(discussion => discussion.category === category);
  }
  
  currentPage = 1;
  displayDiscussions();
}

// Filter discussions by type (latest/hot)
function filterDiscussions(type) {
  if (type === 'latest') {
    filteredDiscussions.sort((a, b) => {
      const dateA = a.createdAt?.toDate() || new Date(0);
      const dateB = b.createdAt?.toDate() || new Date(0);
      return dateB - dateA;
    });
  } else if (type === 'hot') {
    filteredDiscussions.sort((a, b) => {
      const popularityA = (a.replyCount || 0) + (a.likes || 0) + (a.views || 0);
      const popularityB = (b.replyCount || 0) + (b.likes || 0) + (b.views || 0);
      return popularityB - popularityA;
    });
  }
  
  currentPage = 1;
  displayDiscussions();
}

// Search discussions
function searchDiscussions() {
  const searchTerm = document.getElementById('forumSearch').value.toLowerCase();
  
  if (!searchTerm) {
    filteredDiscussions = [...allDiscussions];
  } else {
    filteredDiscussions = allDiscussions.filter(discussion => {
      return discussion.title.toLowerCase().includes(searchTerm) || 
             discussion.content.toLowerCase().includes(searchTerm);
    });
  }
  
  currentPage = 1;
  displayDiscussions();
}

// Create new discussion
async function createNewDiscussion() {
  const user = auth.currentUser;
  if (!user) {
    alert('Silakan login terlebih dahulu untuk membuat diskusi baru');
    return;
  }
  
  const title = document.getElementById('discussionTitle').value.trim();
  const category = document.getElementById('discussionCategory').value;
  const content = document.getElementById('discussionContent').value.trim();
  
  if (!title || !category || !content) {
    alert('Semua field harus diisi');
    return;
  }
  
  const submitBtn = document.getElementById('submitDiscussion');
  const originalText = submitBtn.textContent;
  submitBtn.disabled = true;
  submitBtn.textContent = 'Membuat...';
  
  try {
    const newDiscussion = {
      title,
      category,
      content,
      authorId: user.uid,
      authorName: user.displayName || 'Anonymous',
      authorEmail: user.email,
      createdAt: serverTimestamp(),
      views: 0,
      likes: 0,
      replyCount: 0
    };
    
    const docRef = await addDoc(collection(db, "discussions"), newDiscussion);
    
    // Add to local array
    newDiscussion.id = docRef.id;
    newDiscussion.createdAt = new Date();
    allDiscussions.unshift(newDiscussion);
    filteredDiscussions.unshift(newDiscussion);
    
    // Reset form and close modal
    document.getElementById('newDiscussionForm').reset();
    document.getElementById('newDiscussionModal').style.display = 'none';
    
    // Refresh display
    currentPage = 1;
    displayDiscussions();
    
    // Show success message
    alert('Diskusi berhasil dibuat!');
  } catch (error) {
    console.error("Error creating discussion:", error);
    alert('Gagal membuat diskusi. Silakan coba lagi nanti.');
  } finally {
    submitBtn.disabled = false;
    submitBtn.textContent = originalText;
  }
}

// View discussion details
function viewDiscussion(discussionId) {
  // Increment view count
  const discussionRef = doc(db, "discussions", discussionId);
  updateDoc(discussionRef, {
    views: increment(1)
  });
  
  // TODO: Implement detailed view page or modal
  alert(`Membuka diskusi dengan ID: ${discussionId}`);
}

// Pagination functions
function updatePagination() {
  const totalPages = Math.ceil(filteredDiscussions.length / discussionsPerPage);
  const pageNumbers = document.getElementById('pageNumbers');
  pageNumbers.innerHTML = '';
  
  for (let i = 1; i <= totalPages; i++) {
    const pageBtn = document.createElement('button');
    pageBtn.textContent = i;
    pageBtn.style.padding = '8px 15px';
    pageBtn.style.borderRadius = '8px';
    pageBtn.style.cursor = 'pointer';
    
    if (i === currentPage) {
      pageBtn.style.background = 'rgba(78, 161, 255, 0.2)';
      pageBtn.style.border = '1px solid rgba(78, 161, 255, 0.5)';
      pageBtn.style.color = '#4ea1ff';
    } else {
      pageBtn.style.background = 'rgba(255,255,255,0.05)';
      pageBtn.style.border = '1px solid rgba(255,255,255,0.2)';
      pageBtn.style.color = 'white';
    }
    
    pageBtn.addEventListener('click', () => {
      currentPage = i;
      displayDiscussions();
    });
    
    pageNumbers.appendChild(pageBtn);
  }
  
  // Update prev/next buttons
  document.getElementById('prevPageBtn').disabled = currentPage === 1;
  document.getElementById('nextPageBtn').disabled = currentPage === totalPages;
}

function goToPrevPage() {
  if (currentPage > 1) {
    currentPage--;
    displayDiscussions();
  }
}

function goToNextPage() {
  const totalPages = Math.ceil(filteredDiscussions.length / discussionsPerPage);
  if (currentPage < totalPages) {
    currentPage++;
    displayDiscussions();
  }
}

// Helper functions
function getCategoryLabel(category) {
  const labels = {
    arduino: 'Arduino',
    iot: 'IoT',
    pemrograman: 'Pemrograman',
    elektronik: 'Elektronik',
    lainnya: 'Lainnya'
  };
  return labels[category] || labels.lainnya;
}

function getCategoryColor(category) {
  const colors = {
    arduino: '#4ea1ff',
    iot: '#FFC107',
    pemrograman: '#F44336',
    elektronik: '#4CAF50',
    lainnya: '#9C27B0'
  };
  return colors[category] || '#9C27B0';
}

function getCategoryBackground(category) {
  const colors = {
    arduino: 'rgba(78, 161, 255, 0.1)',
    iot: 'rgba(255, 193, 7, 0.1)',
    pemrograman: 'rgba(244, 67, 54, 0.1)',
    elektronik: 'rgba(76, 175, 80, 0.1)',
    lainnya: 'rgba(156, 39, 176, 0.1)'
  };
  return colors[category] || 'rgba(156, 39, 176, 0.1)';
}

function formatTimeAgo(date) {
  const now = new Date();
  const diffInSeconds = Math.floor((now - date) / 1000);
  
  if (diffInSeconds < 60) return 'baru saja';
  if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} menit yang lalu`;
  if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} jam yang lalu`;
  if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)} hari yang lalu`;
  
  return date.toLocaleDateString('id-ID', { 
    day: 'numeric', 
    month: 'long', 
    year: 'numeric' 
  });
}

// Initialize forum when page is shown
document.addEventListener('DOMContentLoaded', function() {
  // Check if we're on the forum page
  if (window.location.pathname.includes('/halaman-forum') || 
      (window.history.state && window.history.state.page === 'forum')) {
    initializeForumPage();
  }
  
  // Also initialize when navigating to forum via popstate
  window.addEventListener('popstate', function(event) {
    if (event.state && event.state.page === 'forum') {
      initializeForumPage();
    }
  });
});



// Event listener untuk tombol Diskusi Baru
document.getElementById('newDiscussionBtn').addEventListener('click', function() {
  const user = auth.currentUser;
  if (!user) {
    alert('Silakan login terlebih dahulu untuk membuat diskusi baru');
    return;
  }
  document.getElementById('newDiscussionModal').style.display = 'flex';
});

// Event listener untuk tombol Batal
document.getElementById('cancelDiscussion').addEventListener('click', function() {
  document.getElementById('newDiscussionModal').style.display = 'none';
  document.getElementById('newDiscussionForm').reset();
});

// Event listener untuk submit form
document.getElementById('newDiscussionForm').addEventListener('submit', function(e) {
  e.preventDefault();
  createNewDiscussion();
});


// Fungsi untuk membuat diskusi baru
async function createNewDiscussion() {
  const user = auth.currentUser;
  if (!user) {
    alert('Silakan login terlebih dahulu untuk membuat diskusi baru');
    return;
  }

  const title = document.getElementById('discussionTitle').value.trim();
  const category = document.getElementById('discussionCategory').value;
  const content = document.getElementById('discussionContent').value.trim();

  if (!title || !category || !content) {
    alert('Semua field harus diisi');
    return;
  }

  const submitBtn = document.getElementById('submitDiscussion');
  const originalBtnText = submitBtn.innerHTML;
  submitBtn.disabled = true;
  submitBtn.innerHTML = 'Membuat...';

  try {
    const newDiscussion = {
      title,
      category,
      content,
      authorId: user.uid,
      authorName: user.displayName || 'Anonymous',
      authorEmail: user.email,
      createdAt: serverTimestamp(),
      views: 0,
      likes: 0,
      replyCount: 0
    };

    const docRef = await addDoc(collection(db, "discussions"), newDiscussion);
    newDiscussion.id = docRef.id;
    newDiscussion.createdAt = new Date();

    // Tambahkan ke array lokal
    allDiscussions.unshift(newDiscussion);
    filteredDiscussions.unshift(newDiscussion);

    // Reset form dan tutup modal
    document.getElementById('newDiscussionForm').reset();
    document.getElementById('newDiscussionModal').style.display = 'none';

    // Refresh tampilan
    currentPage = 1;
    displayDiscussions();

    alert('Diskusi berhasil dibuat!');
  } catch (error) {
    console.error("Error creating discussion:", error);
    alert('Gagal membuat diskusi. Silakan coba lagi nanti.');
  } finally {
    submitBtn.disabled = false;
    submitBtn.innerHTML = originalBtnText;
  }
}


// Hapus event listener ganda untuk form diskusi
// Pastikan hanya ada satu event listener untuk form
document.getElementById('newDiscussionForm')?.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const user = auth.currentUser;
    if (!user) {
        alert('Silakan login terlebih dahulu untuk membuat diskusi baru');
        return;
    }

    const title = document.getElementById('discussionTitle').value.trim();
    const category = document.getElementById('discussionCategory').value;
    const content = document.getElementById('discussionContent').value.trim();

    if (!title || !category || !content) {
        alert('Semua field harus diisi');
        return;
    }

    const submitBtn = document.getElementById('submitDiscussion');
    const originalBtnText = submitBtn.innerHTML;
    submitBtn.disabled = true;
    submitBtn.innerHTML = 'Membuat... <span class="loading-spinner"></span>';

    try {
        const newDiscussion = {
            title,
            category,
            content,
            authorId: user.uid,
            authorName: user.displayName || 'Anonymous',
            authorEmail: user.email,
            createdAt: serverTimestamp(),
            views: 0,
            likes: 0,
            replyCount: 0,
            status: 'active'
        };

        // Tambahkan diskusi ke Firestore
        const docRef = await addDoc(collection(db, "discussions"), newDiscussion);
        
        // Tambahkan ke array lokal untuk tampilan langsung
        newDiscussion.id = docRef.id;
        newDiscussion.createdAt = new Date();
        allDiscussions.unshift(newDiscussion);
        filteredDiscussions.unshift(newDiscussion);

        // Reset form dan tutup modal
        document.getElementById('newDiscussionForm').reset();
        document.getElementById('newDiscussionModal').style.display = 'none';

        // Tampilkan notifikasi sukses
        alert('Diskusi berhasil dibuat!');
        
        // Perbarui tampilan diskusi
        currentPage = 1;
        displayDiscussions();

    } catch (error) {
        console.error("Error creating discussion:", error);
        alert('Gagal membuat diskusi. Silakan coba lagi nanti.');
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalBtnText;
    }
});










	 
	 
	  
	  
	  
        // Blog search and pagination
        if (document.getElementById('searchBtn')) {
            document.getElementById('searchBtn').addEventListener('click', searchBlogs);
        }

        if (document.getElementById('blogSearch')) {
            document.getElementById('blogSearch').addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    searchBlogs();
                }
            });
        }

        // Initialize blog pagination
        function initializeBlogPagination() {
            const blogItems = document.querySelectorAll('.blog-item');
            if (blogItems.length === 0) return;
            
            let currentPage = 1;
            const blogsPerPage = 6;
            const totalBlogs = blogItems.length;
            const totalPages = Math.ceil(totalBlogs / blogsPerPage);

            function showPage(page) {
                currentPage = page;
                const startIndex = (page - 1) * blogsPerPage;
                const endIndex = startIndex + blogsPerPage;
                
                blogItems.forEach((item, index) => {
                    if (index >= startIndex && index < endIndex) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
                
                // Update active button
                document.querySelectorAll('.page-btn').forEach(btn => {
                    btn.classList.remove('active');
                    if (parseInt(btn.getAttribute('data-page')) === page) {
                        btn.classList.add('active');
                    }
                });
                
                // Update pagination text
                const blogCountDisplay = document.getElementById('blogCountDisplay');
                if (blogCountDisplay) {
                    blogCountDisplay.textContent = 
                        `Menampilkan ${Math.min(endIndex, totalBlogs)} dari ${totalBlogs} Blog (Halaman ${page} dari ${totalPages})`;
                }
            }

            // Set up pagination controls
            document.querySelectorAll('.page-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    showPage(parseInt(this.getAttribute('data-page')));
                });
            });

            if (document.getElementById('prevPage')) {
                document.getElementById('prevPage').addEventListener('click', function() {
                    if (currentPage > 1) {
                        showPage(currentPage - 1);
                    }
                });
            }

            if (document.getElementById('nextPage')) {
                document.getElementById('nextPage').addEventListener('click', function() {
                    if (currentPage < totalPages) {
                        showPage(currentPage + 1);
                    }
                });
            }

            // Show first page initially
            showPage(1);
            updateBlogCount();
        }
		
		
		
		
		
		
		
		
		
   // Add this to your event listeners setup
document.addEventListener('click', async (e) => {
    // Handle clicks on announcement titles
    const announcementTitle = e.target.closest('.announcement-title');
    if (announcementTitle) {
        e.preventDefault();
        const announcementId = announcementTitle.getAttribute('data-id');
        if (announcementId) {
            history.pushState({ page: "detail-pengumuman" }, "", `/halaman-masukan-${announcementId}`);
            await showAnnouncementDetailById(announcementId);
        }
    }
    
    // Handle clicks on "View Details" buttons
    const viewDetailsBtn = e.target.closest('.view-details-btn, .view-announcement-btn');
    if (viewDetailsBtn) {
        e.preventDefault();
        const feedbackItem = viewDetailsBtn.closest('.feedback-item, .pinned-item');
        if (feedbackItem) {
            const announcementId = feedbackItem.getAttribute('data-id');
            if (announcementId) {
                history.pushState({ page: "detail-pengumuman" }, "", `/halaman-masukan-${announcementId}`);
                await showAnnouncementDetailById(announcementId);
            }
        }
    }
});
   
   
   
   async function findAnnouncementById(id) {
    try {
        const docRef = doc(db, "announcements", id);
        const docSnap = await getDoc(docRef);

        if (docSnap.exists()) {
            return { id: docSnap.id, ...docSnap.data() };
        }

        return null;
    } catch (error) {
        console.error("Error finding announcement by ID:", error);
        return null;
    }
}
   
   
   
   
   window.onload = async function () {
    const path = window.location.pathname || "/";
    const isAnnouncementDetail = path.startsWith('/halaman-masukan-');

    if (isAnnouncementDetail) {
        const id = decodeURIComponent(path.replace('/halaman-masukan-', ''));
        await showAnnouncementDetailById(id);
        return;
    }

    await handlePageLoad(true); // true indicates this is the initial load
};

// Fungsi untuk menangani perubahan URL (back/forward browser)
window.addEventListener("popstate", function(event) {
    handlePageLoad(false); // false berarti bukan initial load
});

// Variabel untuk menyimpan state saat ini
let currentState = {
    page: "home",
    announcementId: null
};








async function handlePageLoad(isInitialLoad = true) {
    const path = window.location.pathname || "/";

    // Handle announcement detail from URL
    if (path.includes('halaman-masukan-')) {
        const id = path.split('halaman-masukan-')[1];
        if (id) {
            showPageContent(document.getElementById("page9"));
            await showAnnouncementDetailById(id);
            return;
        }
    }

    // Handle other pages
    if (path.includes("halaman-arduino")) {
        showPageContent(document.getElementById("page2"));
    } else if (path.includes("halaman-iot")) {
        showPageContent(document.getElementById("page3"));
    } else if (path.includes("halaman-blog")) {
        showPageContent(document.getElementById("page4"));
    } else if (path.includes("halaman-kumpulan-blog")) {
        showPageContent(document.getElementById("page5"));
    } else if (path.includes("halaman-tentang-kami")) {
        showPageContent(document.getElementById("page6"));
    } else if (path.includes("halaman-masukan")) {
        showPageContent(document.getElementById("page7"));
        await loadFeedback();
    } else if (path.includes("halaman-forum")) {
        showPageContent(document.getElementById("page8"));
    } else {
        // Default to home page
        showPageContent(document.getElementById("page1"));
    }

    // Additional initialization for initial load
    if (isInitialLoad) {
        initializeBlogPagination();
        // Any other initializations you need
    }
}




function handleInitialNavigation() {
  const hash = window.location.hash;
  const path = window.location.pathname;
  const urlParams = new URLSearchParams(window.location.search);
  const announcementId = urlParams.get("id");

  if (announcementId && path.includes("halaman-masukan-halo")) {
    // Jika URL mengandung ?id= dan sedang di halaman masukan
    showAnnouncementDetail(announcementId);
  } else if (path.includes("halaman-masukan-halo")) {
    // Jika hanya buka halaman masukan tanpa ?id
    showPageContent(document.getElementById("page7"));
  } else if (hash) {
    // Navigasi via hash seperti #page3
    showPageByHash(hash);
  } else {
    // Default: tampilkan halaman utama
    showPageContent(document.getElementById("page1"));
  }
}






// Setup event listeners for announcements
function setupAnnouncementEventListeners() {
    // Back button handlers
    document.getElementById('backToAnnouncements')?.addEventListener('click', backToFeedbackPage);
    document.getElementById('backToFeedbackPage')?.addEventListener('click', backToFeedbackPage);
    
    // Handle clicks on announcement items
    document.addEventListener('click', async (e) => {
        const announcementItem = e.target.closest('.pinned-item, .announcement-item');
        if (announcementItem) {
            e.preventDefault();
            const id = announcementItem.getAttribute('data-id');
            if (id) {
                await showAnnouncementDetailById(id);
                history.pushState(
                    { page: "detail-pengumuman", id: id }, 
                    "Detail Pengumuman", 
                    `/halaman-masukan-${id}`
                );
            }
        }
    });
}






document.addEventListener("DOMContentLoaded", () => {
  const backToMasukan = document.getElementById("backToFeedbackPage");
  const backToPengumuman = document.getElementById("backToAnnouncements");

  if (backToMasukan) {
    backToMasukan.addEventListener("click", () => {
      history.pushState({ page: "masukan" }, "Masukan", "/halaman-masukan");
      handlePageLoad(false);
    });
  }

  if (backToPengumuman) {
    backToPengumuman.addEventListener("click", () => {
      history.pushState({ page: "masukan" }, "Masukan", "/halaman-masukan");
      handlePageLoad(false);
    });
  }
});





async function showDetailPengumumanById(id) {
  if (!id) {
    console.error("ID pengumuman tidak valid");
    return;
  }

  const db = getFirestore();

  try {
    const docRef = doc(db, "announcements", id); // Pastikan koleksi ini benar: "announcements"
    const docSnap = await getDoc(docRef);

    if (!docSnap.exists()) {
      // Jika pengumuman tidak ditemukan
      const container = document.getElementById("announcementDetailContainer");
      container.innerHTML = `
        <h2 style="color: white;">Pengumuman tidak ditemukan</h2>
        <p style="color: #ccc;">ID: ${id}</p>
      `;
      showPage(page9);
      return;
    }

    const data = docSnap.data();

    // Tampilkan konten ke dalam kontainer detail
    const container = document.getElementById("announcementDetailContainer");
    container.innerHTML = `
      <h2 style="color: white; font-size: 28px; margin-bottom: 10px;">${data.title}</h2>
      <p style="color: #ccc; font-size: 14px; margin-bottom: 20px;">Diposting: ${formatTimestamp(data.timestamp)}</p>
      <div style="color: white; font-size: 16px; line-height: 1.6;">${data.content}</div>
    `;

    showPage(page9); // Tampilkan halaman 9

  } catch (err) {
    console.error("Gagal mengambil pengumuman berdasarkan ID:", err);
    alert("Gagal memuat detail pengumuman.");
  }
}





async function renderMasukanDetailById(id) {
    if (!id) {
        showNotification("ID masukan tidak valid.", "error");
        return;
    }

    try {
        const docRef = doc(db, "masukan", id);
        const docSnap = await getDoc(docRef);

        if (!docSnap.exists()) {
            showNotification("Masukan tidak ditemukan.", "error");
            return;
        }

        const data = docSnap.data();

        // Tampilkan halaman 9
        showPage(page9);

        // Render konten ke elemen yang sesuai
        const titleElement = document.getElementById("masukanDetailTitle");
        const contentElement = document.getElementById("masukanDetailContent");

        if (titleElement) {
            titleElement.textContent = data.title || "(Tanpa Judul)";
        }

        if (contentElement) {
            contentElement.innerHTML = data.content || "<p>Tidak ada konten tersedia.</p>";
        }

        // Update judul halaman
        document.title = `${data.title || "Masukan"} - Life Is What It Is Learn`;

    } catch (error) {
        console.error("Gagal memuat detail masukan:", error);
        showNotification("Gagal memuat detail masukan: " + error.message, "error");
    }
}










async function showAnnouncementDetailById(id) {
    if (!id) return;

    const container = document.getElementById('announcementDetailContainer');
    container.innerHTML = '<div style="color:#ccc; text-align:center; padding:30px;">Memuat pengumuman...</div>';

    try {
        const docRef = doc(db, "announcements", id);
        const docSnap = await getDoc(docRef);

        if (!docSnap.exists()) {
            container.innerHTML = `<h2 style="color: white;">Pengumuman tidak ditemukan</h2><p style="color: #ccc;">ID: ${id}</p>`;
            return;
        }

        const data = docSnap.data();
        const waktu = data.timestamp?.toDate ? data.timestamp.toDate() : new Date();

        container.innerHTML = `
            <div style="max-width: 800px; margin: 0 auto;">
                <h1 style="color: #ff6b6b; margin-bottom: 10px;">${data.title}</h1>
                <p style="color: #ccc; font-size: 14px; margin-bottom: 20px;">Diposting: ${waktu.toLocaleDateString('id-ID')}</p>
                <div style="color: white; font-size: 16px; line-height: 1.6;">${data.content}</div>
            </div>
        `;

        showPageContent(document.getElementById("page9"));
    } catch (error) {
        console.error("Error loading announcement:", error);
        container.innerHTML = `
            <div style="color:#ff6b6b; text-align:center; padding:30px;">
                Gagal memuat pengumuman: ${error.message}
                <button onclick="backToFeedbackPage()" style="margin-top: 15px; padding: 8px 16px; background: none; border: 1px solid #ff6b6b; color: #ff6b6b; cursor: pointer;">Kembali ke Halaman Masukan</button>
            </div>
        `;
    }
}






async function loadAnnouncementDetailById(id) {
    if (!id) {
        throw new Error("ID pengumuman tidak valid");
    }

    try {
        const docRef = doc(db, "announcements", id);
        const docSnap = await getDoc(docRef);

        if (!docSnap.exists()) {
            throw new Error("Pengumuman tidak ditemukan");
        }

        const data = docSnap.data();
        const waktu = data.timestamp?.toDate ? data.timestamp.toDate() : new Date();

        // Kembalikan data lengkap pengumuman
        return {
            id: doc.id,
            ...data,
            formattedDate: formatTimeAgo(waktu)
        };

    } catch (error) {
        console.error("Error loading announcement:", error);
        throw error;
    }
}














// Function to go back to feedback page
function backToFeedbackPage() {
    showPageContent(document.getElementById("page7"));
    loadFeedback().catch(console.error);
    history.pushState({ page: "masukan" }, "Halaman Masukan", "/halaman-masukan");
    document.title = "Masukan - Life Is What It Is Learn";
}


// Improved formatTimeAgo function
function formatTimeAgo(timestamp) {
    if (!timestamp) return 'baru saja';
    
    const now = new Date();
    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
    const diffInSeconds = Math.floor((now - date) / 1000);
    
    if (diffInSeconds < 60) return 'baru saja';
    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} menit yang lalu`;
    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} jam yang lalu`;
    if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)} hari yang lalu`;
    
    return date.toLocaleDateString('id-ID', {
        day: 'numeric',
        month: 'long',
        year: 'numeric'
    });
}







// Add event listener for back button
document.getElementById('backToAnnouncements')?.addEventListener('click', backToFeedbackPage);
document.getElementById('backToFeedbackPage')?.addEventListener('click', backToFeedbackPage);


document.addEventListener('click', async (e) => {
    const announcementItem = e.target.closest('.pinned-item, .announcement-item');
    if (announcementItem) {
        e.preventDefault();
        const announcementId = announcementItem.getAttribute('data-id'); // Ambil ID dari data-id
        if (announcementId) {
            await showAnnouncementDetailById(announcementId); // Ganti dengan fungsi yang menggunakan ID
        }
    }

    // Handle back to feedback button
    if (e.target.matches('#backToFeedbackPage, #backToAnnouncements')) {
        e.preventDefault();
        backToFeedbackPage();
    }
});






window.addEventListener('popstate', async function(event) {
    try {
        // If we have state data, use that
        if (event.state) {
            currentState = event.state;

            switch (currentState.page) {
                case "announcementDetail":
                    const idFromState = currentState.announcementId || currentState.id;
                    if (idFromState) {
                        showPageContent(document.getElementById("page9"));
                        await showAnnouncementDetailById(idFromState);
                    }
                    break;

                case "arduino":
                    showPageContent(document.getElementById("page2"));
                    break;

                case "iot":
                    showPageContent(document.getElementById("page3"));
                    break;

                case "blog":
                    showPageContent(document.getElementById("page4"));
                    break;

                case "kumpulan-blog":
                    showPageContent(document.getElementById("page5"));
                    break;

                case "tentang-kami":
                    showPageContent(document.getElementById("page6"));
                    break;

                case "masukan":
                    showPageContent(document.getElementById("page7"));
                    await loadFeedback().catch(console.error);
                    break;

                case "forum":
                    showPageContent(document.getElementById("page8"));
                    break;

                default:
                    showPageContent(document.getElementById("page1"));
            }
        } 
        // If no state, parse from URL
        else {
            const path = window.location.pathname || "/";
            
            // Handle announcement detail from URL
            if (path.includes('halaman-masukan-')) {
                const id = path.split('halaman-masukan-')[1];
                if (id) {
                    showPageContent(document.getElementById("page9"));
                    await showAnnouncementDetailById(id);
                    return;
                }
            }
            
            // Handle other pages
            await handlePageLoad(false);
        }
    } catch (error) {
        console.error("Error handling popstate:", error);
        // Fallback to home page if something goes wrong
        showPageContent(document.getElementById("page1"));
    }
});











function renderAnnouncementDetail(data) {
  const container = document.getElementById("page9");
  container.innerHTML = `
    <div class="line-box">
      <div style="max-width: 800px;">
        <h1 style="color: white;">${data.title}</h1>
        <p style="color: #ccc; line-height: 1.6;">${data.content}</p>
      </div>
    </div>
  `;
}



async function loadAnnouncementById(id) {
    if (!id) {
        console.error("ID pengumuman tidak valid");
        return;
    }

    try {
        const docRef = doc(db, "announcements", id);
        const docSnap = await getDoc(docRef);

        if (!docSnap.exists()) {
            // Tampilkan pesan pengumuman tidak ditemukan
            const container = document.getElementById("page9");
            if (container) {
                container.innerHTML = "<h2 style='color:white'>Pengumuman tidak ditemukan.</h2>";
            }
            return;
        }

        // Ambil data dan tampilkan
        const data = docSnap.data();
        renderAnnouncementDetail({ ...data, id: docSnap.id });

    } catch (error) {
        console.error("Gagal memuat pengumuman:", error);
        const container = document.getElementById("page9");
        if (container) {
            container.innerHTML = "<h2 style='color:white'>Gagal memuat pengumuman.</h2>";
        }
    }
}
}



  
   
  
</script>
</body>
</html>






